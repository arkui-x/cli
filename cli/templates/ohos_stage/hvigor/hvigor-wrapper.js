"use strict";var e=require("fs"),t=require("path"),n=require("os"),r=require("child_process"),u=require("constants"),o=require("stream"),i=require("util"),s=require("assert"),c=require("tty"),a=require("zlib"),l=require("net"),f=require("crypto");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var D=d(e),p=d(t),h=d(n),m=d(r),y=d(u),E=d(o),C=d(i),F=d(s),g=d(c),A=d(a),v=d(l),S=d(f),w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},b={},O={},B={},_=w&&w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(B,"__esModule",{value:!0}),B.maxPathLength=B.isMac=B.isLinux=B.isWindows=void 0;const k=_(h.default),x="Windows_NT",P="Darwin";function N(){return k.default.type()===x}function I(){return k.default.type()===P}B.isWindows=N,B.isLinux=function(){return"Linux"===k.default.type()},B.isMac=I,B.maxPathLength=function(){return I()?1016:N()?259:4095},function(e){var t=w&&w.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var u=Object.getOwnPropertyDescriptor(t,n);u&&!("get"in u?!t.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,u)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=w&&w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=w&&w.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var u in e)"default"!==u&&Object.prototype.hasOwnProperty.call(e,u)&&t(r,e,u);return n(r,e),r};Object.defineProperty(e,"__esModule",{value:!0}),e.WORK_SPACE=e.HVIGOR_PROJECT_WRAPPER_HOME=e.HVIGOR_PROJECT_ROOT_DIR=e.HVIGOR_PROJECT_CACHES_HOME=e.HVIGOR_PNPM_STORE_PATH=e.HVIGOR_WRAPPER_PNPM_SCRIPT_PATH=e.HVIGOR_WRAPPER_TOOLS_HOME=e.HVIGOR_USER_HOME=e.DEFAULT_PACKAGE_JSON=e.DEFAULT_HVIGOR_CONFIG_JSON_FILE_NAME=e.PNPM=e.HVIGOR=e.NPM_TOOL=e.PNPM_TOOL=e.HVIGOR_ENGINE_PACKAGE_NAME=void 0;const u=r(p.default),o=r(h.default),i=B;e.HVIGOR_ENGINE_PACKAGE_NAME="@ohos/hvigor",e.PNPM_TOOL=(0,i.isWindows)()?"pnpm.cmd":"pnpm",e.NPM_TOOL=(0,i.isWindows)()?"npm.cmd":"npm",e.HVIGOR="hvigor",e.PNPM="pnpm",e.DEFAULT_HVIGOR_CONFIG_JSON_FILE_NAME="hvigor-config.json5",e.DEFAULT_PACKAGE_JSON="package.json",e.HVIGOR_USER_HOME=u.resolve(o.homedir(),".hvigor"),e.HVIGOR_WRAPPER_TOOLS_HOME=u.resolve(e.HVIGOR_USER_HOME,"wrapper","tools"),e.HVIGOR_WRAPPER_PNPM_SCRIPT_PATH=u.resolve(e.HVIGOR_WRAPPER_TOOLS_HOME,"node_modules",".bin",e.PNPM_TOOL),e.HVIGOR_PNPM_STORE_PATH=u.resolve(e.HVIGOR_USER_HOME,"caches"),e.HVIGOR_PROJECT_CACHES_HOME=u.resolve(e.HVIGOR_USER_HOME,"project_caches"),e.HVIGOR_PROJECT_ROOT_DIR=process.cwd(),e.HVIGOR_PROJECT_WRAPPER_HOME=u.resolve(e.HVIGOR_PROJECT_ROOT_DIR,e.HVIGOR),e.WORK_SPACE="workspace"}(O);var T={},R={};Object.defineProperty(R,"__esModule",{value:!0}),R.logInfoPrintConsole=R.logErrorAndExit=void 0,R.logErrorAndExit=function(e){e instanceof Error?console.error(e.message):console.error(e),process.exit(-1)},R.logInfoPrintConsole=function(e){console.log(e)};var M=w&&w.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var u=Object.getOwnPropertyDescriptor(t,n);u&&!("get"in u?!t.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,u)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),j=w&&w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),L=w&&w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&M(t,e,n);return j(t,e),t},$=w&&w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(T,"__esModule",{value:!0}),T.isFileExists=T.offlinePluginConversion=T.executeCommand=T.getNpmPath=T.hasNpmPackInPaths=void 0;const H=m.default,J=L(p.default),G=O,U=R,V=$(D.default);T.hasNpmPackInPaths=function(e,t){try{return require.resolve(e,{paths:[...t]}),!0}catch(e){return!1}},T.getNpmPath=function(){const e=process.execPath;return J.join(J.dirname(e),G.NPM_TOOL)},T.executeCommand=function(e,t,n){0!==(0,H.spawnSync)(e,t,n).status&&(0,U.logErrorAndExit)(`Error: ${e} ${t} execute failed.See above for details.`)},T.offlinePluginConversion=function(e,t){return t.startsWith("file:")||t.endsWith(".tgz")?J.resolve(e,G.HVIGOR,t.replace("file:","")):t},T.isFileExists=function(e){return V.default.existsSync(e)&&V.default.statSync(e).isFile()},function(e){var t=w&&w.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var u=Object.getOwnPropertyDescriptor(t,n);u&&!("get"in u?!t.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,u)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=w&&w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=w&&w.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var u in e)"default"!==u&&Object.prototype.hasOwnProperty.call(e,u)&&t(r,e,u);return n(r,e),r},u=w&&w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.executeInstallPnpm=e.isPnpmInstalled=e.environmentHandler=e.checkNpmConifg=e.PNPM_VERSION=void 0;const o=r(D.default),i=O,s=T,c=r(p.default),a=R,l=m.default,f=u(h.default);e.PNPM_VERSION="7.30.0",e.checkNpmConifg=function(){const e=c.resolve(i.HVIGOR_PROJECT_ROOT_DIR,".npmrc"),t=c.resolve(f.default.homedir(),".npmrc");if((0,s.isFileExists)(e)||(0,s.isFileExists)(t))return;const n=(0,s.getNpmPath)(),r=(0,l.spawnSync)(n,["config","get","prefix"],{cwd:i.HVIGOR_PROJECT_ROOT_DIR});if(0!==r.status||!r.stdout)return void(0,a.logErrorAndExit)("Error: The hvigor depends on the npmrc file. Configure the npmrc file first.");const u=c.resolve(`${r.stdout}`.replace(/[\r\n]/gi,""),".npmrc");(0,s.isFileExists)(u)||(0,a.logErrorAndExit)("Error: The hvigor depends on the npmrc file. Configure the npmrc file first.")},e.environmentHandler=function(){process.env["npm_config_update-notifier"]="false"},e.isPnpmInstalled=function(){return!!o.existsSync(i.HVIGOR_WRAPPER_PNPM_SCRIPT_PATH)&&(0,s.hasNpmPackInPaths)("pnpm",[i.HVIGOR_WRAPPER_TOOLS_HOME])},e.executeInstallPnpm=function(){(0,a.logInfoPrintConsole)(`Installing pnpm@${e.PNPM_VERSION}...`);const t=(0,s.getNpmPath)();!function(){const t=c.resolve(i.HVIGOR_WRAPPER_TOOLS_HOME,i.DEFAULT_PACKAGE_JSON);try{o.existsSync(i.HVIGOR_WRAPPER_TOOLS_HOME)||o.mkdirSync(i.HVIGOR_WRAPPER_TOOLS_HOME,{recursive:!0});const n={dependencies:{}};n.dependencies[i.PNPM]=e.PNPM_VERSION,o.writeFileSync(t,JSON.stringify(n))}catch(e){(0,a.logErrorAndExit)(`Error: EPERM: operation not permitted,create ${t} failed.`)}}(),(0,s.executeCommand)(t,["install","pnpm"],{cwd:i.HVIGOR_WRAPPER_TOOLS_HOME,stdio:["inherit","inherit","inherit"],env:process.env}),(0,a.logInfoPrintConsole)("Pnpm install success.")}}(b);var W={},z={},K={},q={};Object.defineProperty(q,"__esModule",{value:!0}),q.Unicode=void 0;class Y{}q.Unicode=Y,Y.SPACE_SEPARATOR=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Y.ID_START=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Y.ID_CONTINUE=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Object.defineProperty(K,"__esModule",{value:!0}),K.JudgeUtil=void 0;const X=q;K.JudgeUtil=class{static isIgnoreChar(e){return"string"==typeof e&&("\t"===e||"\v"===e||"\f"===e||" "===e||" "===e||"\ufeff"===e||"\n"===e||"\r"===e||"\u2028"===e||"\u2029"===e)}static isSpaceSeparator(e){return"string"==typeof e&&X.Unicode.SPACE_SEPARATOR.test(e)}static isIdStartChar(e){return"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||X.Unicode.ID_START.test(e))}static isIdContinueChar(e){return"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"‌"===e||"‍"===e||X.Unicode.ID_CONTINUE.test(e))}static isDigitWithoutZero(e){return/[1-9]/.test(e)}static isDigit(e){return"string"==typeof e&&/[0-9]/.test(e)}static isHexDigit(e){return"string"==typeof e&&/[0-9A-Fa-f]/.test(e)}};var Z=w&&w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z,"__esModule",{value:!0}),z.parseJsonText=z.parseJsonFile=void 0;const Q=K,ee=Z(D.default),te=Z(p.default),ne=Z(h.default);var re;!function(e){e[e.Char=0]="Char",e[e.EOF=1]="EOF",e[e.Identifier=2]="Identifier"}(re||(re={}));let ue,oe,ie,se,ce,ae,le="start",fe=[],de=0,De=1,pe=0,he=!1,me="default",ye="'",Ee=1;function Ce(e,t=!1){oe=String(e),le="start",fe=[],de=0,De=1,pe=0,se=void 0,he=t;do{ue=Fe(),Oe[le]()}while("eof"!==ue.type);return se}function Fe(){for(me="default",ce="",ye="'",Ee=1;;){ae=ge();const e=ve[me]();if(e)return e}}function ge(){if(oe[de])return String.fromCodePoint(oe.codePointAt(de))}function Ae(){const e=ge();return"\n"===e?(De++,pe=0):e?pe+=e.length:pe++,e&&(de+=e.length),e}z.parseJsonFile=function(e,t=!1,n="utf-8"){const r=ee.default.readFileSync(te.default.resolve(e),{encoding:n});try{return Ce(r,t)}catch(t){if(t instanceof SyntaxError){const n=t.message.split("at");if(2===n.length)throw new Error(`${n[0].trim()}${ne.default.EOL}\t at ${e}:${n[1].trim()}`)}throw new Error(`${e} is not in valid JSON/JSON5 format.`)}},z.parseJsonText=Ce;const ve={default(){switch(ae){case"/":return Ae(),void(me="comment");case void 0:return Ae(),Se("eof")}if(!Q.JudgeUtil.isIgnoreChar(ae)&&!Q.JudgeUtil.isSpaceSeparator(ae))return ve[le]();Ae()},start(){me="value"},beforePropertyName(){switch(ae){case"$":case"_":return ce=Ae(),void(me="identifierName");case"\\":return Ae(),void(me="identifierNameStartEscape");case"}":return Se("punctuator",Ae());case'"':case"'":return ye=ae,Ae(),void(me="string")}if(Q.JudgeUtil.isIdStartChar(ae))return ce+=Ae(),void(me="identifierName");throw xe(re.Char,Ae())},afterPropertyName(){if(":"===ae)return Se("punctuator",Ae());throw xe(re.Char,Ae())},beforePropertyValue(){me="value"},afterPropertyValue(){switch(ae){case",":case"}":return Se("punctuator",Ae())}throw xe(re.Char,Ae())},beforeArrayValue(){if("]"===ae)return Se("punctuator",Ae());me="value"},afterArrayValue(){switch(ae){case",":case"]":return Se("punctuator",Ae())}throw xe(re.Char,Ae())},end(){throw xe(re.Char,Ae())},comment(){switch(ae){case"*":return Ae(),void(me="multiLineComment");case"/":return Ae(),void(me="singleLineComment")}throw xe(re.Char,Ae())},multiLineComment(){switch(ae){case"*":return Ae(),void(me="multiLineCommentAsterisk");case void 0:throw xe(re.Char,Ae())}Ae()},multiLineCommentAsterisk(){switch(ae){case"*":return void Ae();case"/":return Ae(),void(me="default");case void 0:throw xe(re.Char,Ae())}Ae(),me="multiLineComment"},singleLineComment(){switch(ae){case"\n":case"\r":case"\u2028":case"\u2029":return Ae(),void(me="default");case void 0:return Ae(),Se("eof")}Ae()},value(){switch(ae){case"{":case"[":return Se("punctuator",Ae());case"n":return Ae(),we("ull"),Se("null",null);case"t":return Ae(),we("rue"),Se("boolean",!0);case"f":return Ae(),we("alse"),Se("boolean",!1);case"-":case"+":return"-"===Ae()&&(Ee=-1),void(me="numerical");case".":case"0":case"I":case"N":return void(me="numerical");case'"':case"'":return ye=ae,Ae(),ce="",void(me="string")}if(void 0===ae||!Q.JudgeUtil.isDigitWithoutZero(ae))throw xe(re.Char,Ae());me="numerical"},numerical(){switch(ae){case".":return ce=Ae(),void(me="decimalPointLeading");case"0":return ce=Ae(),void(me="zero");case"I":return Ae(),we("nfinity"),Se("numeric",Ee*(1/0));case"N":return Ae(),we("aN"),Se("numeric",NaN)}if(void 0!==ae&&Q.JudgeUtil.isDigitWithoutZero(ae))return ce=Ae(),void(me="decimalInteger");throw xe(re.Char,Ae())},zero(){switch(ae){case".":case"e":case"E":return void(me="decimal");case"x":case"X":return ce+=Ae(),void(me="hexadecimal")}return Se("numeric",0)},decimalInteger(){switch(ae){case".":case"e":case"E":return void(me="decimal")}if(!Q.JudgeUtil.isDigit(ae))return Se("numeric",Ee*Number(ce));ce+=Ae()},decimal(){switch(ae){case".":ce+=Ae(),me="decimalFraction";break;case"e":case"E":ce+=Ae(),me="decimalExponent"}},decimalPointLeading(){if(Q.JudgeUtil.isDigit(ae))return ce+=Ae(),void(me="decimalFraction");throw xe(re.Char,Ae())},decimalFraction(){switch(ae){case"e":case"E":return ce+=Ae(),void(me="decimalExponent")}if(!Q.JudgeUtil.isDigit(ae))return Se("numeric",Ee*Number(ce));ce+=Ae()},decimalExponent(){switch(ae){case"+":case"-":return ce+=Ae(),void(me="decimalExponentSign")}if(Q.JudgeUtil.isDigit(ae))return ce+=Ae(),void(me="decimalExponentInteger");throw xe(re.Char,Ae())},decimalExponentSign(){if(Q.JudgeUtil.isDigit(ae))return ce+=Ae(),void(me="decimalExponentInteger");throw xe(re.Char,Ae())},decimalExponentInteger(){if(!Q.JudgeUtil.isDigit(ae))return Se("numeric",Ee*Number(ce));ce+=Ae()},hexadecimal(){if(Q.JudgeUtil.isHexDigit(ae))return ce+=Ae(),void(me="hexadecimalInteger");throw xe(re.Char,Ae())},hexadecimalInteger(){if(!Q.JudgeUtil.isHexDigit(ae))return Se("numeric",Ee*Number(ce));ce+=Ae()},identifierNameStartEscape(){if("u"!==ae)throw xe(re.Char,Ae());Ae();const e=be();switch(e){case"$":case"_":break;default:if(!Q.JudgeUtil.isIdStartChar(e))throw xe(re.Identifier)}ce+=e,me="identifierName"},identifierName(){switch(ae){case"$":case"_":case"‌":case"‍":return void(ce+=Ae());case"\\":return Ae(),void(me="identifierNameEscape")}if(!Q.JudgeUtil.isIdContinueChar(ae))return Se("identifier",ce);ce+=Ae()},identifierNameEscape(){if("u"!==ae)throw xe(re.Char,Ae());Ae();const e=be();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!Q.JudgeUtil.isIdContinueChar(e))throw xe(re.Identifier)}ce+=e,me="identifierName"},string(){switch(ae){case"\\":return Ae(),void(ce+=function(){const e=ge(),t=function(){switch(ge()){case"b":return Ae(),"\b";case"f":return Ae(),"\f";case"n":return Ae(),"\n";case"r":return Ae(),"\r";case"t":return Ae(),"\t";case"v":return Ae(),"\v"}return}();if(t)return t;switch(e){case"0":if(Ae(),Q.JudgeUtil.isDigit(ge()))throw xe(re.Char,Ae());return"\0";case"x":return Ae(),function(){let e="",t=ge();if(!Q.JudgeUtil.isHexDigit(t))throw xe(re.Char,Ae());if(e+=Ae(),t=ge(),!Q.JudgeUtil.isHexDigit(t))throw xe(re.Char,Ae());return e+=Ae(),String.fromCodePoint(parseInt(e,16))}();case"u":return Ae(),be();case"\n":case"\u2028":case"\u2029":return Ae(),"";case"\r":return Ae(),"\n"===ge()&&Ae(),""}if(void 0===e||Q.JudgeUtil.isDigitWithoutZero(e))throw xe(re.Char,Ae());return Ae()}());case'"':case"'":if(ae===ye){const e=Se("string",ce);return Ae(),e}return void(ce+=Ae());case"\n":case"\r":case void 0:throw xe(re.Char,Ae());case"\u2028":case"\u2029":!function(e){console.warn(`JSON5: '${ke(e)}' in strings is not valid ECMAScript; consider escaping.`)}(ae)}ce+=Ae()}};function Se(e,t){return{type:e,value:t,line:De,column:pe}}function we(e){for(const t of e){if(ge()!==t)throw xe(re.Char,Ae());Ae()}}function be(){let e="",t=4;for(;t-- >0;){const t=ge();if(!Q.JudgeUtil.isHexDigit(t))throw xe(re.Char,Ae());e+=Ae()}return String.fromCodePoint(parseInt(e,16))}const Oe={start(){if("eof"===ue.type)throw xe(re.EOF);Be()},beforePropertyName(){switch(ue.type){case"identifier":case"string":return ie=ue.value,void(le="afterPropertyName");case"punctuator":return void _e();case"eof":throw xe(re.EOF)}},afterPropertyName(){if("eof"===ue.type)throw xe(re.EOF);le="beforePropertyValue"},beforePropertyValue(){if("eof"===ue.type)throw xe(re.EOF);Be()},afterPropertyValue(){if("eof"===ue.type)throw xe(re.EOF);switch(ue.value){case",":return void(le="beforePropertyName");case"}":_e()}},beforeArrayValue(){if("eof"===ue.type)throw xe(re.EOF);"punctuator"!==ue.type||"]"!==ue.value?Be():_e()},afterArrayValue(){if("eof"===ue.type)throw xe(re.EOF);switch(ue.value){case",":return void(le="beforeArrayValue");case"]":_e()}},end(){}};function Be(){const e=function(){let e;switch(ue.type){case"punctuator":switch(ue.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=ue.value}return e}();if(he&&"object"==typeof e&&(e._line=De,e._column=pe),void 0===se)se=e;else{const t=fe[fe.length-1];Array.isArray(t)?he&&"object"!=typeof e?t.push({value:e,_line:De,_column:pe}):t.push(e):t[ie]=he&&"object"!=typeof e?{value:e,_line:De,_column:pe}:e}!function(e){if(e&&"object"==typeof e)fe.push(e),le=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{const e=fe[fe.length-1];le=e?Array.isArray(e)?"afterArrayValue":"afterPropertyValue":"end"}}(e)}function _e(){fe.pop();const e=fe[fe.length-1];le=e?Array.isArray(e)?"afterArrayValue":"afterPropertyValue":"end"}function ke(e){const t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){const t=e.charCodeAt(0).toString(16);return`\\x${`00${t}`.substring(t.length)}`}return e}function xe(e,t){let n="";switch(e){case re.Char:n=void 0===t?`JSON5: invalid end of input at ${De}:${pe}`:`JSON5: invalid character '${ke(t)}' at ${De}:${pe}`;break;case re.EOF:n=`JSON5: invalid end of input at ${De}:${pe}`;break;case re.Identifier:pe-=5,n=`JSON5: invalid identifier character at ${De}:${pe}`}const r=new Pe(n);return r.lineNumber=De,r.columnNumber=pe,r}class Pe extends SyntaxError{}var Ne={},Ie={},Te={fromCallback:function(e){return Object.defineProperty((function(...t){if("function"!=typeof t[t.length-1])return new Promise(((n,r)=>{e.call(this,...t,((e,t)=>null!=e?r(e):n(t)))}));e.apply(this,t)}),"name",{value:e.name})},fromPromise:function(e){return Object.defineProperty((function(...t){const n=t[t.length-1];if("function"!=typeof n)return e.apply(this,t);e.apply(this,t.slice(0,-1)).then((e=>n(null,e)),n)}),"name",{value:e.name})}},Re=y.default,Me=process.cwd,je=null,Le=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return je||(je=Me.call(process)),je};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var $e=process.chdir;process.chdir=function(e){je=null,$e.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,$e)}var He=function(e){Re.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,n,r){e.open(t,Re.O_WRONLY|Re.O_SYMLINK,n,(function(t,u){t?r&&r(t):e.fchmod(u,n,(function(t){e.close(u,(function(e){r&&r(t||e)}))}))}))},e.lchmodSync=function(t,n){var r,u=e.openSync(t,Re.O_WRONLY|Re.O_SYMLINK,n),o=!0;try{r=e.fchmodSync(u,n),o=!1}finally{if(o)try{e.closeSync(u)}catch(e){}else e.closeSync(u)}return r}}(e);e.lutimes||function(e){Re.hasOwnProperty("O_SYMLINK")&&e.futimes?(e.lutimes=function(t,n,r,u){e.open(t,Re.O_SYMLINK,(function(t,o){t?u&&u(t):e.futimes(o,n,r,(function(t){e.close(o,(function(e){u&&u(t||e)}))}))}))},e.lutimesSync=function(t,n,r){var u,o=e.openSync(t,Re.O_SYMLINK),i=!0;try{u=e.futimesSync(o,n,r),i=!1}finally{if(i)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return u}):e.futimes&&(e.lutimes=function(e,t,n,r){r&&process.nextTick(r)},e.lutimesSync=function(){})}(e);e.chown=r(e.chown),e.fchown=r(e.fchown),e.lchown=r(e.lchown),e.chmod=t(e.chmod),e.fchmod=t(e.fchmod),e.lchmod=t(e.lchmod),e.chownSync=u(e.chownSync),e.fchownSync=u(e.fchownSync),e.lchownSync=u(e.lchownSync),e.chmodSync=n(e.chmodSync),e.fchmodSync=n(e.fchmodSync),e.lchmodSync=n(e.lchmodSync),e.stat=o(e.stat),e.fstat=o(e.fstat),e.lstat=o(e.lstat),e.statSync=i(e.statSync),e.fstatSync=i(e.fstatSync),e.lstatSync=i(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(e,t,n){n&&process.nextTick(n)},e.lchmodSync=function(){});e.chown&&!e.lchown&&(e.lchown=function(e,t,n,r){r&&process.nextTick(r)},e.lchownSync=function(){});"win32"===Le&&(e.rename="function"!=typeof e.rename?e.rename:function(t){function n(n,r,u){var o=Date.now(),i=0;t(n,r,(function s(c){if(c&&("EACCES"===c.code||"EPERM"===c.code||"EBUSY"===c.code)&&Date.now()-o<6e4)return setTimeout((function(){e.stat(r,(function(e,o){e&&"ENOENT"===e.code?t(n,r,s):u(c)}))}),i),void(i<100&&(i+=10));u&&u(c)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(n,t),n}(e.rename));function t(t){return t?function(n,r,u){return t.call(e,n,r,(function(e){s(e)&&(e=null),u&&u.apply(this,arguments)}))}:t}function n(t){return t?function(n,r){try{return t.call(e,n,r)}catch(e){if(!s(e))throw e}}:t}function r(t){return t?function(n,r,u,o){return t.call(e,n,r,u,(function(e){s(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function u(t){return t?function(n,r,u){try{return t.call(e,n,r,u)}catch(e){if(!s(e))throw e}}:t}function o(t){return t?function(n,r,u){function o(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),u&&u.apply(this,arguments)}return"function"==typeof r&&(u=r,r=null),r?t.call(e,n,r,o):t.call(e,n,o)}:t}function i(t){return t?function(n,r){var u=r?t.call(e,n,r):t.call(e,n);return u&&(u.uid<0&&(u.uid+=4294967296),u.gid<0&&(u.gid+=4294967296)),u}:t}function s(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}e.read="function"!=typeof e.read?e.read:function(t){function n(n,r,u,o,i,s){var c;if(s&&"function"==typeof s){var a=0;c=function(l,f,d){if(l&&"EAGAIN"===l.code&&a<10)return a++,t.call(e,n,r,u,o,i,c);s.apply(this,arguments)}}return t.call(e,n,r,u,o,i,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(n,t),n}(e.read),e.readSync="function"!=typeof e.readSync?e.readSync:(c=e.readSync,function(t,n,r,u,o){for(var i=0;;)try{return c.call(e,t,n,r,u,o)}catch(e){if("EAGAIN"===e.code&&i<10){i++;continue}throw e}});var c};var Je=E.default.Stream,Ge=function(e){return{ReadStream:function t(n,r){if(!(this instanceof t))return new t(n,r);Je.call(this);var u=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,r=r||{};for(var o=Object.keys(r),i=0,s=o.length;i<s;i++){var c=o[i];this[c]=r[c]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){u._read()}));e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return u.emit("error",e),void(u.readable=!1);u.fd=t,u.emit("open",t),u._read()}))},WriteStream:function t(n,r){if(!(this instanceof t))return new t(n,r);Je.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var u=Object.keys(r),o=0,i=u.length;o<i;o++){var s=u[o];this[s]=r[s]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}};var Ue=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:Ve(e)};else t=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t},Ve=Object.getPrototypeOf||function(e){return e.__proto__};var We,ze,Ke=D.default,qe=He,Ye=Ge,Xe=Ue,Ze=C.default;function Qe(e,t){Object.defineProperty(e,We,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(We=Symbol.for("graceful-fs.queue"),ze=Symbol.for("graceful-fs.previous")):(We="___graceful-fs.queue",ze="___graceful-fs.previous");var et=function(){};if(Ze.debuglog?et=Ze.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(et=function(){var e=Ze.format.apply(Ze,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!Ke[We]){var tt=w[We]||[];Qe(Ke,tt),Ke.close=function(e){function t(t,n){return e.call(Ke,t,(function(e){e||it(),"function"==typeof n&&n.apply(this,arguments)}))}return Object.defineProperty(t,ze,{value:e}),t}(Ke.close),Ke.closeSync=function(e){function t(t){e.apply(Ke,arguments),it()}return Object.defineProperty(t,ze,{value:e}),t}(Ke.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){et(Ke[We]),F.default.equal(Ke[We].length,0)}))}w[We]||Qe(w,Ke[We]);var nt,rt=ut(Xe(Ke));function ut(e){qe(e),e.gracefulify=ut,e.createReadStream=function(t,n){return new e.ReadStream(t,n)},e.createWriteStream=function(t,n){return new e.WriteStream(t,n)};var t=e.readFile;e.readFile=function(e,n,r){"function"==typeof n&&(r=n,n=null);return function e(n,r,u,o){return t(n,r,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof u&&u.apply(this,arguments):ot([e,[n,r,u],t,o||Date.now(),Date.now()])}))}(e,n,r)};var n=e.writeFile;e.writeFile=function(e,t,r,u){"function"==typeof r&&(u=r,r=null);return function e(t,r,u,o,i){return n(t,r,u,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof o&&o.apply(this,arguments):ot([e,[t,r,u,o],n,i||Date.now(),Date.now()])}))}(e,t,r,u)};var r=e.appendFile;r&&(e.appendFile=function(e,t,n,u){"function"==typeof n&&(u=n,n=null);return function e(t,n,u,o,i){return r(t,n,u,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof o&&o.apply(this,arguments):ot([e,[t,n,u,o],r,i||Date.now(),Date.now()])}))}(e,t,n,u)});var u=e.copyFile;u&&(e.copyFile=function(e,t,n,r){"function"==typeof n&&(r=n,n=0);return function e(t,n,r,o,i){return u(t,n,r,(function(u){!u||"EMFILE"!==u.code&&"ENFILE"!==u.code?"function"==typeof o&&o.apply(this,arguments):ot([e,[t,n,r,o],u,i||Date.now(),Date.now()])}))}(e,t,n,r)});var o=e.readdir;e.readdir=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r=i.test(process.version)?function(e,t,n,r){return o(e,u(e,t,n,r))}:function(e,t,n,r){return o(e,t,u(e,t,n,r))};return r(e,t,n);function u(e,t,n,u){return function(o,i){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?(i&&i.sort&&i.sort(),"function"==typeof n&&n.call(this,o,i)):ot([r,[e,t,n],o,u||Date.now(),Date.now()])}}};var i=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var s=Ye(e);d=s.ReadStream,D=s.WriteStream}var c=e.ReadStream;c&&(d.prototype=Object.create(c.prototype),d.prototype.open=function(){var e=this;h(e.path,e.flags,e.mode,(function(t,n){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n),e.read())}))});var a=e.WriteStream;a&&(D.prototype=Object.create(a.prototype),D.prototype.open=function(){var e=this;h(e.path,e.flags,e.mode,(function(t,n){t?(e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return d},set:function(e){d=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return D},set:function(e){D=e},enumerable:!0,configurable:!0});var l=d;Object.defineProperty(e,"FileReadStream",{get:function(){return l},set:function(e){l=e},enumerable:!0,configurable:!0});var f=D;function d(e,t){return this instanceof d?(c.apply(this,arguments),this):d.apply(Object.create(d.prototype),arguments)}function D(e,t){return this instanceof D?(a.apply(this,arguments),this):D.apply(Object.create(D.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return f},set:function(e){f=e},enumerable:!0,configurable:!0});var p=e.open;function h(e,t,n,r){return"function"==typeof n&&(r=n,n=null),function e(t,n,r,u,o){return p(t,n,r,(function(i,s){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof u&&u.apply(this,arguments):ot([e,[t,n,r,u],i,o||Date.now(),Date.now()])}))}(e,t,n,r)}return e.open=h,e}function ot(e){et("ENQUEUE",e[0].name,e[1]),Ke[We].push(e),st()}function it(){for(var e=Date.now(),t=0;t<Ke[We].length;++t)Ke[We][t].length>2&&(Ke[We][t][3]=e,Ke[We][t][4]=e);st()}function st(){if(clearTimeout(nt),nt=void 0,0!==Ke[We].length){var e=Ke[We].shift(),t=e[0],n=e[1],r=e[2],u=e[3],o=e[4];if(void 0===u)et("RETRY",t.name,n),t.apply(null,n);else if(Date.now()-u>=6e4){et("TIMEOUT",t.name,n);var i=n.pop();"function"==typeof i&&i.call(null,r)}else{var s=Date.now()-o,c=Math.max(o-u,1);s>=Math.min(1.2*c,100)?(et("RETRY",t.name,n),t.apply(null,n.concat([u]))):Ke[We].push(e)}void 0===nt&&(nt=setTimeout(st,0))}}process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Ke.__patched&&(rt=ut(Ke),Ke.__patched=!0),function(e){const t=Te.fromCallback,n=rt,r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((e=>"function"==typeof n[e]));Object.assign(e,n),r.forEach((r=>{e[r]=t(n[r])})),e.realpath.native=t(n.realpath.native),e.exists=function(e,t){return"function"==typeof t?n.exists(e,t):new Promise((t=>n.exists(e,t)))},e.read=function(e,t,r,u,o,i){return"function"==typeof i?n.read(e,t,r,u,o,i):new Promise(((i,s)=>{n.read(e,t,r,u,o,((e,t,n)=>{if(e)return s(e);i({bytesRead:t,buffer:n})}))}))},e.write=function(e,t,...r){return"function"==typeof r[r.length-1]?n.write(e,t,...r):new Promise(((u,o)=>{n.write(e,t,...r,((e,t,n)=>{if(e)return o(e);u({bytesWritten:t,buffer:n})}))}))},"function"==typeof n.writev&&(e.writev=function(e,t,...r){return"function"==typeof r[r.length-1]?n.writev(e,t,...r):new Promise(((u,o)=>{n.writev(e,t,...r,((e,t,n)=>{if(e)return o(e);u({bytesWritten:t,buffers:n})}))}))})}(Ie);var ct={},at={};const lt=p.default;at.checkPath=function(e){if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(lt.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}};const ft=Ie,{checkPath:dt}=at,Dt=e=>"number"==typeof e?e:{mode:511,...e}.mode;ct.makeDir=async(e,t)=>(dt(e),ft.mkdir(e,{mode:Dt(t),recursive:!0})),ct.makeDirSync=(e,t)=>(dt(e),ft.mkdirSync(e,{mode:Dt(t),recursive:!0}));const pt=Te.fromPromise,{makeDir:ht,makeDirSync:mt}=ct,yt=pt(ht);var Et={mkdirs:yt,mkdirsSync:mt,mkdirp:yt,mkdirpSync:mt,ensureDir:yt,ensureDirSync:mt};const Ct=Te.fromPromise,Ft=Ie;var gt={pathExists:Ct((function(e){return Ft.access(e).then((()=>!0)).catch((()=>!1))})),pathExistsSync:Ft.existsSync};const At=rt;var vt=function(e,t,n,r){At.open(e,"r+",((e,u)=>{if(e)return r(e);At.futimes(u,t,n,(e=>{At.close(u,(t=>{r&&r(e||t)}))}))}))},St=function(e,t,n){const r=At.openSync(e,"r+");return At.futimesSync(r,t,n),At.closeSync(r)};const wt=Ie,bt=p.default,Ot=C.default;function Bt(e,t,n){const r=n.dereference?e=>wt.stat(e,{bigint:!0}):e=>wt.lstat(e,{bigint:!0});return Promise.all([r(e),r(t).catch((e=>{if("ENOENT"===e.code)return null;throw e}))]).then((([e,t])=>({srcStat:e,destStat:t})))}function _t(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function kt(e,t){const n=bt.resolve(e).split(bt.sep).filter((e=>e)),r=bt.resolve(t).split(bt.sep).filter((e=>e));return n.reduce(((e,t,n)=>e&&r[n]===t),!0)}function xt(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}var Pt={checkPaths:function(e,t,n,r,u){Ot.callbackify(Bt)(e,t,r,((r,o)=>{if(r)return u(r);const{srcStat:i,destStat:s}=o;if(s){if(_t(i,s)){const r=bt.basename(e),o=bt.basename(t);return"move"===n&&r!==o&&r.toLowerCase()===o.toLowerCase()?u(null,{srcStat:i,destStat:s,isChangingCase:!0}):u(new Error("Source and destination must not be the same."))}if(i.isDirectory()&&!s.isDirectory())return u(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!i.isDirectory()&&s.isDirectory())return u(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return i.isDirectory()&&kt(e,t)?u(new Error(xt(e,t,n))):u(null,{srcStat:i,destStat:s})}))},checkPathsSync:function(e,t,n,r){const{srcStat:u,destStat:o}=function(e,t,n){let r;const u=n.dereference?e=>wt.statSync(e,{bigint:!0}):e=>wt.lstatSync(e,{bigint:!0}),o=u(e);try{r=u(t)}catch(e){if("ENOENT"===e.code)return{srcStat:o,destStat:null};throw e}return{srcStat:o,destStat:r}}(e,t,r);if(o){if(_t(u,o)){const r=bt.basename(e),i=bt.basename(t);if("move"===n&&r!==i&&r.toLowerCase()===i.toLowerCase())return{srcStat:u,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(u.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!u.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(u.isDirectory()&&kt(e,t))throw new Error(xt(e,t,n));return{srcStat:u,destStat:o}},checkParentPaths:function e(t,n,r,u,o){const i=bt.resolve(bt.dirname(t)),s=bt.resolve(bt.dirname(r));if(s===i||s===bt.parse(s).root)return o();wt.stat(s,{bigint:!0},((i,c)=>i?"ENOENT"===i.code?o():o(i):_t(n,c)?o(new Error(xt(t,r,u))):e(t,n,s,u,o)))},checkParentPathsSync:function e(t,n,r,u){const o=bt.resolve(bt.dirname(t)),i=bt.resolve(bt.dirname(r));if(i===o||i===bt.parse(i).root)return;let s;try{s=wt.statSync(i,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(_t(n,s))throw new Error(xt(t,r,u));return e(t,n,i,u)},isSrcSubdir:kt,areIdentical:_t};const Nt=rt,It=p.default,Tt=Et.mkdirs,Rt=gt.pathExists,Mt=vt,jt=Pt;function Lt(e,t,n,r,u){const o=It.dirname(n);Rt(o,((i,s)=>i?u(i):s?Ht(e,t,n,r,u):void Tt(o,(o=>o?u(o):Ht(e,t,n,r,u)))))}function $t(e,t,n,r,u,o){Promise.resolve(u.filter(n,r)).then((i=>i?e(t,n,r,u,o):o()),(e=>o(e)))}function Ht(e,t,n,r,u){(r.dereference?Nt.stat:Nt.lstat)(t,((o,i)=>o?u(o):i.isDirectory()?function(e,t,n,r,u,o){return t?Vt(n,r,u,o):function(e,t,n,r,u){Nt.mkdir(n,(o=>{if(o)return u(o);Vt(t,n,r,(t=>t?u(t):Ut(n,e,u)))}))}(e.mode,n,r,u,o)}(i,e,t,n,r,u):i.isFile()||i.isCharacterDevice()||i.isBlockDevice()?function(e,t,n,r,u,o){return t?function(e,t,n,r,u){if(!r.overwrite)return r.errorOnExist?u(new Error(`'${n}' already exists`)):u();Nt.unlink(n,(o=>o?u(o):Jt(e,t,n,r,u)))}(e,n,r,u,o):Jt(e,n,r,u,o)}(i,e,t,n,r,u):i.isSymbolicLink()?function(e,t,n,r,u){Nt.readlink(t,((t,o)=>t?u(t):(r.dereference&&(o=It.resolve(process.cwd(),o)),e?void Nt.readlink(n,((t,i)=>t?"EINVAL"===t.code||"UNKNOWN"===t.code?Nt.symlink(o,n,u):u(t):(r.dereference&&(i=It.resolve(process.cwd(),i)),jt.isSrcSubdir(o,i)?u(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${i}'.`)):e.isDirectory()&&jt.isSrcSubdir(i,o)?u(new Error(`Cannot overwrite '${i}' with '${o}'.`)):function(e,t,n){Nt.unlink(t,(r=>r?n(r):Nt.symlink(e,t,n)))}(o,n,u)))):Nt.symlink(o,n,u))))}(e,t,n,r,u):i.isSocket()?u(new Error(`Cannot copy a socket file: ${t}`)):i.isFIFO()?u(new Error(`Cannot copy a FIFO pipe: ${t}`)):u(new Error(`Unknown file: ${t}`))))}function Jt(e,t,n,r,u){Nt.copyFile(t,n,(o=>o?u(o):r.preserveTimestamps?function(e,t,n,r){if(function(e){return 0==(128&e)}(e))return function(e,t,n){return Ut(e,128|t,n)}(n,e,(u=>u?r(u):Gt(e,t,n,r)));return Gt(e,t,n,r)}(e.mode,t,n,u):Ut(n,e.mode,u)))}function Gt(e,t,n,r){!function(e,t,n){Nt.stat(e,((e,r)=>e?n(e):Mt(t,r.atime,r.mtime,n)))}(t,n,(t=>t?r(t):Ut(n,e,r)))}function Ut(e,t,n){return Nt.chmod(e,t,n)}function Vt(e,t,n,r){Nt.readdir(e,((u,o)=>u?r(u):Wt(o,e,t,n,r)))}function Wt(e,t,n,r,u){const o=e.pop();return o?function(e,t,n,r,u,o){const i=It.join(n,t),s=It.join(r,t);jt.checkPaths(i,s,"copy",u,((t,c)=>{if(t)return o(t);const{destStat:a}=c;!function(e,t,n,r,u){r.filter?$t(Ht,e,t,n,r,u):Ht(e,t,n,r,u)}(a,i,s,u,(t=>t?o(t):Wt(e,n,r,u,o)))}))}(e,o,t,n,r,u):u()}var zt=function(e,t,n,r){"function"!=typeof n||r?"function"==typeof n&&(n={filter:n}):(r=n,n={}),r=r||function(){},(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),jt.checkPaths(e,t,"copy",n,((u,o)=>{if(u)return r(u);const{srcStat:i,destStat:s}=o;jt.checkParentPaths(e,i,t,"copy",(u=>u?r(u):n.filter?$t(Lt,s,e,t,n,r):Lt(s,e,t,n,r)))}))};const Kt=rt,qt=p.default,Yt=Et.mkdirsSync,Xt=St,Zt=Pt;function Qt(e,t,n,r){const u=(r.dereference?Kt.statSync:Kt.lstatSync)(t);if(u.isDirectory())return function(e,t,n,r,u){return t?nn(n,r,u):function(e,t,n,r){return Kt.mkdirSync(n),nn(t,n,r),tn(n,e)}(e.mode,n,r,u)}(u,e,t,n,r);if(u.isFile()||u.isCharacterDevice()||u.isBlockDevice())return function(e,t,n,r,u){return t?function(e,t,n,r){if(r.overwrite)return Kt.unlinkSync(n),en(e,t,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}(e,n,r,u):en(e,n,r,u)}(u,e,t,n,r);if(u.isSymbolicLink())return function(e,t,n,r){let u=Kt.readlinkSync(t);r.dereference&&(u=qt.resolve(process.cwd(),u));if(e){let e;try{e=Kt.readlinkSync(n)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return Kt.symlinkSync(u,n);throw e}if(r.dereference&&(e=qt.resolve(process.cwd(),e)),Zt.isSrcSubdir(u,e))throw new Error(`Cannot copy '${u}' to a subdirectory of itself, '${e}'.`);if(Kt.statSync(n).isDirectory()&&Zt.isSrcSubdir(e,u))throw new Error(`Cannot overwrite '${e}' with '${u}'.`);return function(e,t){return Kt.unlinkSync(t),Kt.symlinkSync(e,t)}(u,n)}return Kt.symlinkSync(u,n)}(e,t,n,r);if(u.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(u.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}function en(e,t,n,r){return Kt.copyFileSync(t,n),r.preserveTimestamps&&function(e,t,n){(function(e){return 0==(128&e)})(e)&&function(e,t){tn(e,128|t)}(n,e);(function(e,t){const n=Kt.statSync(e);Xt(t,n.atime,n.mtime)})(t,n)}(e.mode,t,n),tn(n,e.mode)}function tn(e,t){return Kt.chmodSync(e,t)}function nn(e,t,n){Kt.readdirSync(e).forEach((r=>function(e,t,n,r){const u=qt.join(t,e),o=qt.join(n,e),{destStat:i}=Zt.checkPathsSync(u,o,"copy",r);return function(e,t,n,r){if(!r.filter||r.filter(t,n))return Qt(e,t,n,r)}(i,u,o,r)}(r,e,t,n)))}var rn=function(e,t,n){"function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const{srcStat:r,destStat:u}=Zt.checkPathsSync(e,t,"copy",n);return Zt.checkParentPathsSync(e,r,t,"copy"),function(e,t,n,r){if(r.filter&&!r.filter(t,n))return;const u=qt.dirname(n);Kt.existsSync(u)||Yt(u);return Qt(e,t,n,r)}(u,e,t,n)};var un={copy:(0,Te.fromCallback)(zt),copySync:rn};const on=rt,sn=p.default,cn=F.default,an="win32"===process.platform;function ln(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||on[t],e[t+="Sync"]=e[t]||on[t]})),e.maxBusyTries=e.maxBusyTries||3}function fn(e,t,n){let r=0;"function"==typeof t&&(n=t,t={}),cn(e,"rimraf: missing path"),cn.strictEqual(typeof e,"string","rimraf: path should be a string"),cn.strictEqual(typeof n,"function","rimraf: callback function required"),cn(t,"rimraf: invalid options argument provided"),cn.strictEqual(typeof t,"object","rimraf: options should be object"),ln(t),dn(e,t,(function u(o){if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&r<t.maxBusyTries){r++;return setTimeout((()=>dn(e,t,u)),100*r)}"ENOENT"===o.code&&(o=null)}n(o)}))}function dn(e,t,n){cn(e),cn(t),cn("function"==typeof n),t.lstat(e,((r,u)=>r&&"ENOENT"===r.code?n(null):r&&"EPERM"===r.code&&an?Dn(e,t,r,n):u&&u.isDirectory()?hn(e,t,r,n):void t.unlink(e,(r=>{if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return an?Dn(e,t,r,n):hn(e,t,r,n);if("EISDIR"===r.code)return hn(e,t,r,n)}return n(r)}))))}function Dn(e,t,n,r){cn(e),cn(t),cn("function"==typeof r),t.chmod(e,438,(u=>{u?r("ENOENT"===u.code?null:n):t.stat(e,((u,o)=>{u?r("ENOENT"===u.code?null:n):o.isDirectory()?hn(e,t,n,r):t.unlink(e,r)}))}))}function pn(e,t,n){let r;cn(e),cn(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw n}try{r=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}r.isDirectory()?yn(e,t,n):t.unlinkSync(e)}function hn(e,t,n,r){cn(e),cn(t),cn("function"==typeof r),t.rmdir(e,(u=>{!u||"ENOTEMPTY"!==u.code&&"EEXIST"!==u.code&&"EPERM"!==u.code?u&&"ENOTDIR"===u.code?r(n):r(u):function(e,t,n){cn(e),cn(t),cn("function"==typeof n),t.readdir(e,((r,u)=>{if(r)return n(r);let o,i=u.length;if(0===i)return t.rmdir(e,n);u.forEach((r=>{fn(sn.join(e,r),t,(r=>{if(!o)return r?n(o=r):void(0==--i&&t.rmdir(e,n))}))}))}))}(e,t,r)}))}function mn(e,t){let n;ln(t=t||{}),cn(e,"rimraf: missing path"),cn.strictEqual(typeof e,"string","rimraf: path should be a string"),cn(t,"rimraf: missing options"),cn.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&an&&pn(e,t,n)}try{n&&n.isDirectory()?yn(e,t,null):t.unlinkSync(e)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return an?pn(e,t,n):yn(e,t,n);if("EISDIR"!==n.code)throw n;yn(e,t,n)}}function yn(e,t,n){cn(e),cn(t);try{t.rmdirSync(e)}catch(r){if("ENOTDIR"===r.code)throw n;if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)!function(e,t){if(cn(e),cn(t),t.readdirSync(e).forEach((n=>mn(sn.join(e,n),t))),!an){return t.rmdirSync(e,t)}{const n=Date.now();do{try{return t.rmdirSync(e,t)}catch{}}while(Date.now()-n<500)}}(e,t);else if("ENOENT"!==r.code)throw r}}var En=fn;fn.sync=mn;const Cn=rt,Fn=Te.fromCallback,gn=En;var An={remove:Fn((function(e,t){if(Cn.rm)return Cn.rm(e,{recursive:!0,force:!0},t);gn(e,t)})),removeSync:function(e){if(Cn.rmSync)return Cn.rmSync(e,{recursive:!0,force:!0});gn.sync(e)}};const vn=Te.fromPromise,Sn=Ie,wn=p.default,bn=Et,On=An,Bn=vn((async function(e){let t;try{t=await Sn.readdir(e)}catch{return bn.mkdirs(e)}return Promise.all(t.map((t=>On.remove(wn.join(e,t)))))}));function _n(e){let t;try{t=Sn.readdirSync(e)}catch{return bn.mkdirsSync(e)}t.forEach((t=>{t=wn.join(e,t),On.removeSync(t)}))}var kn={emptyDirSync:_n,emptydirSync:_n,emptyDir:Bn,emptydir:Bn};const xn=Te.fromCallback,Pn=p.default,Nn=rt,In=Et;var Tn={createFile:xn((function(e,t){function n(){Nn.writeFile(e,"",(e=>{if(e)return t(e);t()}))}Nn.stat(e,((r,u)=>{if(!r&&u.isFile())return t();const o=Pn.dirname(e);Nn.stat(o,((e,r)=>{if(e)return"ENOENT"===e.code?In.mkdirs(o,(e=>{if(e)return t(e);n()})):t(e);r.isDirectory()?n():Nn.readdir(o,(e=>{if(e)return t(e)}))}))}))})),createFileSync:function(e){let t;try{t=Nn.statSync(e)}catch{}if(t&&t.isFile())return;const n=Pn.dirname(e);try{Nn.statSync(n).isDirectory()||Nn.readdirSync(n)}catch(e){if(!e||"ENOENT"!==e.code)throw e;In.mkdirsSync(n)}Nn.writeFileSync(e,"")}};const Rn=Te.fromCallback,Mn=p.default,jn=rt,Ln=Et,$n=gt.pathExists,{areIdentical:Hn}=Pt;var Jn={createLink:Rn((function(e,t,n){function r(e,t){jn.link(e,t,(e=>{if(e)return n(e);n(null)}))}jn.lstat(t,((u,o)=>{jn.lstat(e,((u,i)=>{if(u)return u.message=u.message.replace("lstat","ensureLink"),n(u);if(o&&Hn(i,o))return n(null);const s=Mn.dirname(t);$n(s,((u,o)=>u?n(u):o?r(e,t):void Ln.mkdirs(s,(u=>{if(u)return n(u);r(e,t)}))))}))}))})),createLinkSync:function(e,t){let n;try{n=jn.lstatSync(t)}catch{}try{const t=jn.lstatSync(e);if(n&&Hn(t,n))return}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const r=Mn.dirname(t);return jn.existsSync(r)||Ln.mkdirsSync(r),jn.linkSync(e,t)}};const Gn=p.default,Un=rt,Vn=gt.pathExists;var Wn={symlinkPaths:function(e,t,n){if(Gn.isAbsolute(e))return Un.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:e})));{const r=Gn.dirname(t),u=Gn.join(r,e);return Vn(u,((t,o)=>t?n(t):o?n(null,{toCwd:u,toDst:e}):Un.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:Gn.relative(r,e)})))))}},symlinkPathsSync:function(e,t){let n;if(Gn.isAbsolute(e)){if(n=Un.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const r=Gn.dirname(t),u=Gn.join(r,e);if(n=Un.existsSync(u),n)return{toCwd:u,toDst:e};if(n=Un.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:Gn.relative(r,e)}}}};const zn=rt;var Kn={symlinkType:function(e,t,n){if(n="function"==typeof t?t:n,t="function"!=typeof t&&t)return n(null,t);zn.lstat(e,((e,r)=>{if(e)return n(null,"file");t=r&&r.isDirectory()?"dir":"file",n(null,t)}))},symlinkTypeSync:function(e,t){let n;if(t)return t;try{n=zn.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}};const qn=Te.fromCallback,Yn=p.default,Xn=Ie,Zn=Et.mkdirs,Qn=Et.mkdirsSync,er=Wn.symlinkPaths,tr=Wn.symlinkPathsSync,nr=Kn.symlinkType,rr=Kn.symlinkTypeSync,ur=gt.pathExists,{areIdentical:or}=Pt;function ir(e,t,n,r){er(e,t,((u,o)=>{if(u)return r(u);e=o.toDst,nr(o.toCwd,n,((n,u)=>{if(n)return r(n);const o=Yn.dirname(t);ur(o,((n,i)=>n?r(n):i?Xn.symlink(e,t,u,r):void Zn(o,(n=>{if(n)return r(n);Xn.symlink(e,t,u,r)}))))}))}))}var sr={createSymlink:qn((function(e,t,n,r){r="function"==typeof n?n:r,n="function"!=typeof n&&n,Xn.lstat(t,((u,o)=>{!u&&o.isSymbolicLink()?Promise.all([Xn.stat(e),Xn.stat(t)]).then((([u,o])=>{if(or(u,o))return r(null);ir(e,t,n,r)})):ir(e,t,n,r)}))})),createSymlinkSync:function(e,t,n){let r;try{r=Xn.lstatSync(t)}catch{}if(r&&r.isSymbolicLink()){const n=Xn.statSync(e),r=Xn.statSync(t);if(or(n,r))return}const u=tr(e,t);e=u.toDst,n=rr(u.toCwd,n);const o=Yn.dirname(t);return Xn.existsSync(o)||Qn(o),Xn.symlinkSync(e,t,n)}};const{createFile:cr,createFileSync:ar}=Tn,{createLink:lr,createLinkSync:fr}=Jn,{createSymlink:dr,createSymlinkSync:Dr}=sr;var pr={createFile:cr,createFileSync:ar,ensureFile:cr,ensureFileSync:ar,createLink:lr,createLinkSync:fr,ensureLink:lr,ensureLinkSync:fr,createSymlink:dr,createSymlinkSync:Dr,ensureSymlink:dr,ensureSymlinkSync:Dr};var hr={stringify:function(e,{EOL:t="\n",finalEOL:n=!0,replacer:r=null,spaces:u}={}){const o=n?t:"";return JSON.stringify(e,r,u).replace(/\n/g,t)+o},stripBom:function(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}};let mr;try{mr=rt}catch(e){mr=D.default}const yr=Te,{stringify:Er,stripBom:Cr}=hr;const Fr=yr.fromPromise((async function(e,t={}){"string"==typeof t&&(t={encoding:t});const n=t.fs||mr,r=!("throws"in t)||t.throws;let u,o=await yr.fromCallback(n.readFile)(e,t);o=Cr(o);try{u=JSON.parse(o,t?t.reviver:null)}catch(t){if(r)throw t.message=`${e}: ${t.message}`,t;return null}return u}));const gr=yr.fromPromise((async function(e,t,n={}){const r=n.fs||mr,u=Er(t,n);await yr.fromCallback(r.writeFile)(e,u,n)}));const Ar={readFile:Fr,readFileSync:function(e,t={}){"string"==typeof t&&(t={encoding:t});const n=t.fs||mr,r=!("throws"in t)||t.throws;try{let r=n.readFileSync(e,t);return r=Cr(r),JSON.parse(r,t.reviver)}catch(t){if(r)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:gr,writeFileSync:function(e,t,n={}){const r=n.fs||mr,u=Er(t,n);return r.writeFileSync(e,u,n)}};var vr={readJson:Ar.readFile,readJsonSync:Ar.readFileSync,writeJson:Ar.writeFile,writeJsonSync:Ar.writeFileSync};const Sr=Te.fromCallback,wr=rt,br=p.default,Or=Et,Br=gt.pathExists;var _r={outputFile:Sr((function(e,t,n,r){"function"==typeof n&&(r=n,n="utf8");const u=br.dirname(e);Br(u,((o,i)=>o?r(o):i?wr.writeFile(e,t,n,r):void Or.mkdirs(u,(u=>{if(u)return r(u);wr.writeFile(e,t,n,r)}))))})),outputFileSync:function(e,...t){const n=br.dirname(e);if(wr.existsSync(n))return wr.writeFileSync(e,...t);Or.mkdirsSync(n),wr.writeFileSync(e,...t)}};const{stringify:kr}=hr,{outputFile:xr}=_r;var Pr=async function(e,t,n={}){const r=kr(t,n);await xr(e,r,n)};const{stringify:Nr}=hr,{outputFileSync:Ir}=_r;var Tr=function(e,t,n){const r=Nr(t,n);Ir(e,r,n)};const Rr=Te.fromPromise,Mr=vr;Mr.outputJson=Rr(Pr),Mr.outputJsonSync=Tr,Mr.outputJSON=Mr.outputJson,Mr.outputJSONSync=Mr.outputJsonSync,Mr.writeJSON=Mr.writeJson,Mr.writeJSONSync=Mr.writeJsonSync,Mr.readJSON=Mr.readJson,Mr.readJSONSync=Mr.readJsonSync;var jr=Mr;const Lr=rt,$r=p.default,Hr=un.copy,Jr=An.remove,Gr=Et.mkdirp,Ur=gt.pathExists,Vr=Pt;function Wr(e,t,n,r,u){return r?zr(e,t,n,u):n?Jr(t,(r=>r?u(r):zr(e,t,n,u))):void Ur(t,((r,o)=>r?u(r):o?u(new Error("dest already exists.")):zr(e,t,n,u)))}function zr(e,t,n,r){Lr.rename(e,t,(u=>u?"EXDEV"!==u.code?r(u):function(e,t,n,r){const u={overwrite:n,errorOnExist:!0};Hr(e,t,u,(t=>t?r(t):Jr(e,r)))}(e,t,n,r):r()))}var Kr=function(e,t,n,r){"function"==typeof n&&(r=n,n={});const u=n.overwrite||n.clobber||!1;Vr.checkPaths(e,t,"move",n,((n,o)=>{if(n)return r(n);const{srcStat:i,isChangingCase:s=!1}=o;Vr.checkParentPaths(e,i,t,"move",(n=>n?r(n):function(e){const t=$r.dirname(e);return $r.parse(t).root===t}(t)?Wr(e,t,u,s,r):void Gr($r.dirname(t),(n=>n?r(n):Wr(e,t,u,s,r)))))}))};const qr=rt,Yr=p.default,Xr=un.copySync,Zr=An.removeSync,Qr=Et.mkdirpSync,eu=Pt;function tu(e,t,n){try{qr.renameSync(e,t)}catch(r){if("EXDEV"!==r.code)throw r;return function(e,t,n){const r={overwrite:n,errorOnExist:!0};return Xr(e,t,r),Zr(e)}(e,t,n)}}var nu=function(e,t,n){const r=(n=n||{}).overwrite||n.clobber||!1,{srcStat:u,isChangingCase:o=!1}=eu.checkPathsSync(e,t,"move",n);return eu.checkParentPathsSync(e,u,t,"move"),function(e){const t=Yr.dirname(e);return Yr.parse(t).root===t}(t)||Qr(Yr.dirname(t)),function(e,t,n,r){if(r)return tu(e,t,n);if(n)return Zr(t),tu(e,t,n);if(qr.existsSync(t))throw new Error("dest already exists.");return tu(e,t,n)}(e,t,r,o)};var ru,uu,ou,iu,su,cu={move:(0,Te.fromCallback)(Kr),moveSync:nu},au={...Ie,...un,...kn,...pr,...jr,...Et,...cu,..._r,...gt,...An},lu={},fu={exports:{}},du={exports:{}};function Du(){if(uu)return ru;uu=1;var e=1e3,t=60*e,n=60*t,r=24*n,u=7*r,o=365.25*r;function i(e,t,n,r){var u=t>=1.5*n;return Math.round(e/n)+" "+r+(u?"s":"")}return ru=function(s,c){c=c||{};var a=typeof s;if("string"===a&&s.length>0)return function(i){if((i=String(i)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(!s)return;var c=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*u;case"days":case"day":case"d":return c*r;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*t;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(s);if("number"===a&&isFinite(s))return c.long?function(u){var o=Math.abs(u);if(o>=r)return i(u,o,r,"day");if(o>=n)return i(u,o,n,"hour");if(o>=t)return i(u,o,t,"minute");if(o>=e)return i(u,o,e,"second");return u+" ms"}(s):function(u){var o=Math.abs(u);if(o>=r)return Math.round(u/r)+"d";if(o>=n)return Math.round(u/n)+"h";if(o>=t)return Math.round(u/t)+"m";if(o>=e)return Math.round(u/e)+"s";return u+"ms"}(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))}}function pu(){if(iu)return ou;return iu=1,ou=function(e){function t(e){let r,u,o,i=null;function s(...e){if(!s.enabled)return;const n=s,u=Number(new Date),o=u-(r||u);n.diff=o,n.prev=r,n.curr=u,r=u,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,u)=>{if("%%"===r)return"%";i++;const o=t.formatters[u];if("function"==typeof o){const t=e[i];r=o.call(n,t),e.splice(i,1),i--}return r})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(u!==t.namespaces&&(u=t.namespaces,o=t.enabled(e)),o),set:e=>{i=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),u=r.length;for(n=0;n<u;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=Du(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t},ou}var hu,mu,yu,Eu,Cu,Fu,gu={exports:{}};function Au(){return mu?hu:(mu=1,hu=(e,t=process.argv)=>{const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),u=t.indexOf("--");return-1!==r&&(-1===u||r<u)})}function vu(){return Cu||(Cu=1,function(e,t){const n=g.default,r=C.default;t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(r.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:u}=this;if(u){const t=this.color,u="[3"+(t<8?t:"8;5;"+t),o=`  ${u};1m${r} [0m`;n[0]=o+n[0].split("\n").join("\n"+o),n.push(u+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.destroy=r.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=function(){if(Eu)return yu;Eu=1;const e=h.default,t=g.default,n=Au(),{env:r}=process;let u;function o(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function i(t,o){if(0===u)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(t&&!o&&void 0===u)return 0;const i=u||0;if("dumb"===r.TERM)return i;if("win32"===process.platform){const t=e.release().split(".");return Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in r))||"codeship"===r.CI_NAME?1:i;if("TEAMCITY_VERSION"in r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(r.TEAMCITY_VERSION)?1:0;if("truecolor"===r.COLORTERM)return 3;if("TERM_PROGRAM"in r){const e=parseInt((r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(r.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(r.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(r.TERM)||"COLORTERM"in r?1:i}return n("no-color")||n("no-colors")||n("color=false")||n("color=never")?u=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(u=1),"FORCE_COLOR"in r&&(u="true"===r.FORCE_COLOR?1:"false"===r.FORCE_COLOR?0:0===r.FORCE_COLOR.length?1:Math.min(parseInt(r.FORCE_COLOR,10),3)),yu={supportsColor:function(e){return o(i(e,e&&e.isTTY))},stdout:o(i(!0,t.isatty(1))),stderr:o(i(!0,t.isatty(2)))}}();e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e}),{}),e.exports=pu()(t);const{formatters:u}=e.exports;u.o=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},u.O=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts)}}(gu,gu.exports)),gu.exports}Fu=fu,"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?Fu.exports=(su||(su=1,function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,u=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(u=r))})),t.splice(u,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=pu()(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(du,du.exports)),du.exports):Fu.exports=vu();var Su=function(e){return(e=e||{}).circles?function(e){var t=[],n=[];return e.proto?function e(u){if("object"!=typeof u||null===u)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return r(u,e);if(u instanceof Map)return new Map(r(Array.from(u),e));if(u instanceof Set)return new Set(r(Array.from(u),e));var o={};for(var i in t.push(u),n.push(o),u){var s=u[i];if("object"!=typeof s||null===s)o[i]=s;else if(s instanceof Date)o[i]=new Date(s);else if(s instanceof Map)o[i]=new Map(r(Array.from(s),e));else if(s instanceof Set)o[i]=new Set(r(Array.from(s),e));else if(ArrayBuffer.isView(s))o[i]=wu(s);else{var c=t.indexOf(s);o[i]=-1!==c?n[c]:e(s)}}return t.pop(),n.pop(),o}:function e(u){if("object"!=typeof u||null===u)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return r(u,e);if(u instanceof Map)return new Map(r(Array.from(u),e));if(u instanceof Set)return new Set(r(Array.from(u),e));var o={};for(var i in t.push(u),n.push(o),u)if(!1!==Object.hasOwnProperty.call(u,i)){var s=u[i];if("object"!=typeof s||null===s)o[i]=s;else if(s instanceof Date)o[i]=new Date(s);else if(s instanceof Map)o[i]=new Map(r(Array.from(s),e));else if(s instanceof Set)o[i]=new Set(r(Array.from(s),e));else if(ArrayBuffer.isView(s))o[i]=wu(s);else{var c=t.indexOf(s);o[i]=-1!==c?n[c]:e(s)}}return t.pop(),n.pop(),o};function r(e,r){for(var u=Object.keys(e),o=new Array(u.length),i=0;i<u.length;i++){var s=u[i],c=e[s];if("object"!=typeof c||null===c)o[s]=c;else if(c instanceof Date)o[s]=new Date(c);else if(ArrayBuffer.isView(c))o[s]=wu(c);else{var a=t.indexOf(c);o[s]=-1!==a?n[a]:r(c)}}return o}}(e):e.proto?function e(n){if("object"!=typeof n||null===n)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return t(n,e);if(n instanceof Map)return new Map(t(Array.from(n),e));if(n instanceof Set)return new Set(t(Array.from(n),e));var r={};for(var u in n){var o=n[u];"object"!=typeof o||null===o?r[u]=o:o instanceof Date?r[u]=new Date(o):o instanceof Map?r[u]=new Map(t(Array.from(o),e)):o instanceof Set?r[u]=new Set(t(Array.from(o),e)):ArrayBuffer.isView(o)?r[u]=wu(o):r[u]=e(o)}return r}:n;function t(e,t){for(var n=Object.keys(e),r=new Array(n.length),u=0;u<n.length;u++){var o=n[u],i=e[o];"object"!=typeof i||null===i?r[o]=i:i instanceof Date?r[o]=new Date(i):ArrayBuffer.isView(i)?r[o]=wu(i):r[o]=t(i)}return r}function n(e){if("object"!=typeof e||null===e)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return t(e,n);if(e instanceof Map)return new Map(t(Array.from(e),n));if(e instanceof Set)return new Set(t(Array.from(e),n));var r={};for(var u in e)if(!1!==Object.hasOwnProperty.call(e,u)){var o=e[u];"object"!=typeof o||null===o?r[u]=o:o instanceof Date?r[u]=new Date(o):o instanceof Map?r[u]=new Map(t(Array.from(o),n)):o instanceof Set?r[u]=new Set(t(Array.from(o),n)):ArrayBuffer.isView(o)?r[u]=wu(o):r[u]=n(o)}return r}};function wu(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}const bu=C.default,Ou=fu.exports("log4js:configuration"),Bu=[],_u=[],ku=e=>!e,xu=e=>e&&"object"==typeof e&&!Array.isArray(e),Pu=(e,t,n)=>{(Array.isArray(t)?t:[t]).forEach((t=>{if(t)throw new Error(`Problem with log4js configuration: (${bu.inspect(e,{depth:5})}) - ${n}`)}))};var Nu={configure:e=>{Ou("New configuration to be validated: ",e),Pu(e,ku(xu(e)),"must be an object."),Ou(`Calling pre-processing listeners (${Bu.length})`),Bu.forEach((t=>t(e))),Ou("Configuration pre-processing finished."),Ou(`Calling configuration listeners (${_u.length})`),_u.forEach((t=>t(e))),Ou("Configuration finished.")},addListener:e=>{_u.push(e),Ou(`Added listener, now ${_u.length} listeners`)},addPreProcessingListener:e=>{Bu.push(e),Ou(`Added pre-processing listener, now ${Bu.length} listeners`)},throwExceptionIf:Pu,anObject:xu,anInteger:e=>e&&"number"==typeof e&&Number.isInteger(e),validIdentifier:e=>/^[A-Za-z][A-Za-z0-9_]*$/g.test(e),not:ku},Iu={exports:{}};!function(e){function t(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n}function n(e){return t(e,2)}function r(r,u){"string"!=typeof r&&(u=r,r=e.exports.ISO8601_FORMAT),u||(u=e.exports.now());var o=n(u.getDate()),i=n(u.getMonth()+1),s=n(u.getFullYear()),c=n(s.substring(2,4)),a=r.indexOf("yyyy")>-1?s:c,l=n(u.getHours()),f=n(u.getMinutes()),d=n(u.getSeconds()),D=t(u.getMilliseconds(),3),p=function(e){var t=Math.abs(e),n=String(Math.floor(t/60)),r=String(t%60);return n=("0"+n).slice(-2),r=("0"+r).slice(-2),0===e?"Z":(e<0?"+":"-")+n+":"+r}(u.getTimezoneOffset());return r.replace(/dd/g,o).replace(/MM/g,i).replace(/y{1,4}/g,a).replace(/hh/g,l).replace(/mm/g,f).replace(/ss/g,d).replace(/SSS/g,D).replace(/O/g,p)}function u(e,t,n,r){e["set"+(r?"":"UTC")+t](n)}e.exports=r,e.exports.asString=r,e.exports.parse=function(t,n,r){if(!t)throw new Error("pattern must be supplied");return function(t,n,r){var o=t.indexOf("O")<0,i=!1,s=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function(e,t){u(e,"FullYear",t,o)}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function(e,t){u(e,"Month",t-1,o),e.getMonth()!==t-1&&(i=!0)}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function(e,t){i&&u(e,"Month",e.getMonth()-1,o),u(e,"Date",t,o)}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function(e,t){u(e,"Hours",t,o)}},{pattern:/mm/,regexp:"\\d\\d",fn:function(e,t){u(e,"Minutes",t,o)}},{pattern:/ss/,regexp:"\\d\\d",fn:function(e,t){u(e,"Seconds",t,o)}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function(e,t){u(e,"Milliseconds",t,o)}},{pattern:/O/,regexp:"[+-]\\d{1,2}:?\\d{2}?|Z",fn:function(e,t){t="Z"===t?0:t.replace(":","");var n=Math.abs(t),r=(t>0?-1:1)*(n%100+60*Math.floor(n/100));e.setUTCMinutes(e.getUTCMinutes()+r)}}],c=s.reduce((function(e,t){return t.pattern.test(e.regexp)?(t.index=e.regexp.match(t.pattern).index,e.regexp=e.regexp.replace(t.pattern,"("+t.regexp+")")):t.index=-1,e}),{regexp:t,index:[]}),a=s.filter((function(e){return e.index>-1}));a.sort((function(e,t){return e.index-t.index}));var l=new RegExp(c.regexp).exec(n);if(l){var f=r||e.exports.now();return a.forEach((function(e,t){e.fn(f,l[t+1])})),f}throw new Error("String '"+n+"' could not be parsed as '"+t+"'")}(t,n,r)},e.exports.now=function(){return new Date},e.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS",e.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO",e.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS",e.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"}(Iu);const Tu=Iu.exports,Ru=h.default,Mu=C.default,ju=p.default,Lu={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[91,39],yellow:[33,39]};function $u(e){return e?`[${Lu[e][0]}m`:""}function Hu(e){return e?`[${Lu[e][1]}m`:""}function Ju(e,t){return n=Mu.format("[%s] [%s] %s - ",Tu.asString(e.startTime),e.level.toString(),e.categoryName),$u(r=t)+n+Hu(r);var n,r}function Gu(e){return Ju(e)+Mu.format(...e.data)}function Uu(e){return Ju(e,e.level.colour)+Mu.format(...e.data)}function Vu(e){return Mu.format(...e.data)}function Wu(e){return e.data[0]}function zu(e,t){const n=/%(-?[0-9]+)?(\.?-?[0-9]+)?([[\]cdhmnprzxXyflos%])(\{([^}]+)\})?|([^%]+)/;function r(e){return e&&e.pid?e.pid.toString():process.pid.toString()}e=e||"%r %p %c - %m%n";const u={c:function(e,t){let n=e.categoryName;if(t){const e=parseInt(t,10),r=n.split(".");e<r.length&&(n=r.slice(r.length-e).join("."))}return n},d:function(e,t){let n=Tu.ISO8601_FORMAT;return t&&(n=t,"ISO8601"===n?n=Tu.ISO8601_FORMAT:"ISO8601_WITH_TZ_OFFSET"===n?n=Tu.ISO8601_WITH_TZ_OFFSET_FORMAT:"ABSOLUTE"===n?n=Tu.ABSOLUTETIME_FORMAT:"DATE"===n&&(n=Tu.DATETIME_FORMAT)),Tu.asString(n,e.startTime)},h:function(){return Ru.hostname().toString()},m:function(e){return Mu.format(...e.data)},n:function(){return Ru.EOL},p:function(e){return e.level.toString()},r:function(e){return Tu.asString("hh:mm:ss",e.startTime)},"[":function(e){return $u(e.level.colour)},"]":function(e){return Hu(e.level.colour)},y:function(){return r()},z:r,"%":function(){return"%"},x:function(e,n){return void 0!==t[n]?"function"==typeof t[n]?t[n](e):t[n]:null},X:function(e,t){const n=e.context[t];return void 0!==n?"function"==typeof n?n(e):n:null},f:function(e,t){let n=e.fileName||"";if(t){const e=parseInt(t,10),r=n.split(ju.sep);r.length>e&&(n=r.slice(-e).join(ju.sep))}return n},l:function(e){return e.lineNumber?`${e.lineNumber}`:""},o:function(e){return e.columnNumber?`${e.columnNumber}`:""},s:function(e){return e.callStack||""}};function o(e,t,n){return u[e](t,n)}function i(e,t,n){let r=e;return r=function(e,t){let n;return e?(n=parseInt(e.substr(1),10),n>0?t.slice(0,n):t.slice(n)):t}(t,r),r=function(e,t){let n;if(e)if("-"===e.charAt(0))for(n=parseInt(e.substr(1),10);t.length<n;)t+=" ";else for(n=parseInt(e,10);t.length<n;)t=` ${t}`;return t}(n,r),r}return function(t){let r,u="",s=e;for(;null!==(r=n.exec(s));){const e=r[1],n=r[2],c=r[3],a=r[5],l=r[6];if(l)u+=l.toString();else{u+=i(o(c,t,a),n,e)}s=s.substr(r.index+r[0].length)}return u}}const Ku={messagePassThrough:()=>Vu,basic:()=>Gu,colored:()=>Uu,coloured:()=>Uu,pattern:e=>zu(e&&e.pattern,e&&e.tokens),dummy:()=>Wu};var qu={basicLayout:Gu,messagePassThroughLayout:Vu,patternLayout:zu,colouredLayout:Uu,coloredLayout:Uu,dummyLayout:Wu,addLayout(e,t){Ku[e]=t},layout:(e,t)=>Ku[e]&&Ku[e](t)};const Yu=Nu,Xu=["white","grey","black","blue","cyan","green","magenta","red","yellow"];class Zu{constructor(e,t,n){this.level=e,this.levelStr=t,this.colour=n}toString(){return this.levelStr}static getLevel(e,t){return e?e instanceof Zu?e:(e instanceof Object&&e.levelStr&&(e=e.levelStr),Zu[e.toString().toUpperCase()]||t):t}static addLevels(e){if(e){Object.keys(e).forEach((t=>{const n=t.toUpperCase();Zu[n]=new Zu(e[t].value,n,e[t].colour);const r=Zu.levels.findIndex((e=>e.levelStr===n));r>-1?Zu.levels[r]=Zu[n]:Zu.levels.push(Zu[n])})),Zu.levels.sort(((e,t)=>e.level-t.level))}}isLessThanOrEqualTo(e){return"string"==typeof e&&(e=Zu.getLevel(e)),this.level<=e.level}isGreaterThanOrEqualTo(e){return"string"==typeof e&&(e=Zu.getLevel(e)),this.level>=e.level}isEqualTo(e){return"string"==typeof e&&(e=Zu.getLevel(e)),this.level===e.level}}Zu.levels=[],Zu.addLevels({ALL:{value:Number.MIN_VALUE,colour:"grey"},TRACE:{value:5e3,colour:"blue"},DEBUG:{value:1e4,colour:"cyan"},INFO:{value:2e4,colour:"green"},WARN:{value:3e4,colour:"yellow"},ERROR:{value:4e4,colour:"red"},FATAL:{value:5e4,colour:"magenta"},MARK:{value:9007199254740992,colour:"grey"},OFF:{value:Number.MAX_VALUE,colour:"grey"}}),Yu.addListener((e=>{const t=e.levels;if(t){Yu.throwExceptionIf(e,Yu.not(Yu.anObject(t)),"levels must be an object");Object.keys(t).forEach((n=>{Yu.throwExceptionIf(e,Yu.not(Yu.validIdentifier(n)),`level name "${n}" is not a valid identifier (must start with a letter, only contain A-Z,a-z,0-9,_)`),Yu.throwExceptionIf(e,Yu.not(Yu.anObject(t[n])),`level "${n}" must be an object`),Yu.throwExceptionIf(e,Yu.not(t[n].value),`level "${n}" must have a 'value' property`),Yu.throwExceptionIf(e,Yu.not(Yu.anInteger(t[n].value)),`level "${n}".value must have an integer value`),Yu.throwExceptionIf(e,Yu.not(t[n].colour),`level "${n}" must have a 'colour' property`),Yu.throwExceptionIf(e,Yu.not(Xu.indexOf(t[n].colour)>-1),`level "${n}".colour must be one of ${Xu.join(", ")}`)}))}})),Yu.addListener((e=>{Zu.addLevels(e.levels)}));var Qu=Zu,eo={exports:{}},to={};/*! (c) 2020 Andrea Giammarchi */
const{parse:no,stringify:ro}=JSON,{keys:uo}=Object,oo=String,io="string",so={},co="object",ao=(e,t)=>t,lo=e=>e instanceof oo?oo(e):e,fo=(e,t)=>typeof t===io?new oo(t):t,Do=(e,t,n,r)=>{const u=[];for(let o=uo(n),{length:i}=o,s=0;s<i;s++){const i=o[s],c=n[i];if(c instanceof oo){const o=e[c];typeof o!==co||t.has(o)?n[i]=r.call(n,i,o):(t.add(o),n[i]=so,u.push({k:i,a:[e,t,o,r]}))}else n[i]!==so&&(n[i]=r.call(n,i,c))}for(let{length:e}=u,t=0;t<e;t++){const{k:e,a:o}=u[t];n[e]=r.call(n,e,Do.apply(null,o))}return n},po=(e,t,n)=>{const r=oo(t.push(n)-1);return e.set(n,r),r},ho=(e,t)=>{const n=no(e,fo).map(lo),r=n[0],u=t||ao,o=typeof r===co&&r?Do(n,new Set,r,u):r;return u.call({"":o},"",o)};to.parse=ho;const mo=(e,t,n)=>{const r=t&&typeof t===co?(e,n)=>""===e||-1<t.indexOf(e)?n:void 0:t||ao,u=new Map,o=[],i=[];let s=+po(u,o,r.call({"":e},"",e)),c=!s;for(;s<o.length;)c=!0,i[s]=ro(o[s++],a,n);return"["+i.join(",")+"]";function a(e,t){if(c)return c=!c,t;const n=r.call(this,e,t);switch(typeof n){case co:if(null===n)return n;case io:return u.get(n)||po(u,o,n)}return n}};to.stringify=mo;to.toJSON=e=>no(mo(e));to.fromJSON=e=>ho(ro(e));const yo=to,Eo=Qu;class Co{constructor(e,t,n,r,u){this.startTime=new Date,this.categoryName=e,this.data=n,this.level=t,this.context=Object.assign({},r),this.pid=process.pid,u&&(this.functionName=u.functionName,this.fileName=u.fileName,this.lineNumber=u.lineNumber,this.columnNumber=u.columnNumber,this.callStack=u.callStack)}serialise(){const e=this.data.map((e=>(e&&e.message&&e.stack&&(e=Object.assign({message:e.message,stack:e.stack},e)),e)));return this.data=e,yo.stringify(this)}static deserialise(e){let t;try{const n=yo.parse(e);n.data=n.data.map((e=>{if(e&&e.message&&e.stack){const t=new Error(e);Object.keys(e).forEach((n=>{t[n]=e[n]})),e=t}return e})),t=new Co(n.categoryName,Eo.getLevel(n.level.levelStr),n.data,n.context),t.startTime=new Date(n.startTime),t.pid=n.pid,t.cluster=n.cluster}catch(n){t=new Co("log4js",Eo.ERROR,["Unable to parse log:",e,"because: ",n])}return t}}var Fo=Co;const go=fu.exports("log4js:clustering"),Ao=Fo,vo=Nu;let So=!1,wo=null;try{wo=require("cluster")}catch(e){go("cluster module not present"),So=!0}const bo=[];let Oo=!1,Bo="NODE_APP_INSTANCE";const _o=()=>Oo&&"0"===process.env[Bo],ko=()=>So||wo.isMaster||_o(),xo=e=>{bo.forEach((t=>t(e)))},Po=(e,t)=>{if(go("cluster message received from worker ",e,": ",t),e.topic&&e.data&&(t=e,e=void 0),t&&t.topic&&"log4js:message"===t.topic){go("received message: ",t.data);const e=Ao.deserialise(t.data);xo(e)}};So||vo.addListener((e=>{bo.length=0,({pm2:Oo,disableClustering:So,pm2InstanceVar:Bo="NODE_APP_INSTANCE"}=e),go(`clustering disabled ? ${So}`),go(`cluster.isMaster ? ${wo&&wo.isMaster}`),go(`pm2 enabled ? ${Oo}`),go(`pm2InstanceVar = ${Bo}`),go(`process.env[${Bo}] = ${process.env[Bo]}`),Oo&&process.removeListener("message",Po),wo&&wo.removeListener&&wo.removeListener("message",Po),So||e.disableClustering?go("Not listening for cluster messages, because clustering disabled."):_o()?(go("listening for PM2 broadcast messages"),process.on("message",Po)):wo.isMaster?(go("listening for cluster messages"),wo.on("message",Po)):go("not listening for messages, because we are not a master process")}));var No={onlyOnMaster:(e,t)=>ko()?e():t,isMaster:ko,send:e=>{ko()?xo(e):(Oo||(e.cluster={workerId:wo.worker.id,worker:process.pid}),process.send({topic:"log4js:message",data:e.serialise()}))},onMessage:e=>{bo.push(e)}},Io={};function To(e){if("number"==typeof e&&Number.isInteger(e))return e;const t={K:1024,M:1048576,G:1073741824},n=Object.keys(t),r=e.substr(e.length-1).toLocaleUpperCase(),u=e.substring(0,e.length-1).trim();if(n.indexOf(r)<0||!Number.isInteger(Number(u)))throw Error(`maxLogSize: "${e}" is invalid`);return u*t[r]}function Ro(e){return function(e,t){const n=Object.assign({},t);return Object.keys(e).forEach((r=>{n[r]&&(n[r]=e[r](t[r]))})),n}({maxLogSize:To},e)}const Mo={file:Ro,fileSync:Ro};Io.modifyConfig=e=>Mo[e.type]?Mo[e.type](e):e;var jo={};const Lo=console.log.bind(console);jo.configure=function(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),function(e,t){return n=>{Lo(e(n,t))}}(n,e.timezoneOffset)};var $o={};$o.configure=function(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),function(e,t){return n=>{process.stdout.write(`${e(n,t)}\n`)}}(n,e.timezoneOffset)};var Ho={};Ho.configure=function(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),function(e,t){return n=>{process.stderr.write(`${e(n,t)}\n`)}}(n,e.timezoneOffset)};var Jo={};Jo.configure=function(e,t,n,r){const u=n(e.appender);return function(e,t,n,r){const u=r.getLevel(e),o=r.getLevel(t,r.FATAL);return e=>{const t=e.level;t.isGreaterThanOrEqualTo(u)&&t.isLessThanOrEqualTo(o)&&n(e)}}(e.level,e.maxLevel,u,r)};var Go={};const Uo=fu.exports("log4js:categoryFilter");Go.configure=function(e,t,n){const r=n(e.appender);return function(e,t){return"string"==typeof e&&(e=[e]),n=>{Uo(`Checking ${n.categoryName} against ${e}`),-1===e.indexOf(n.categoryName)&&(Uo("Not excluded, sending to appender"),t(n))}}(e.exclude,r)};var Vo={};const Wo=fu.exports("log4js:noLogFilter");Vo.configure=function(e,t,n){const r=n(e.appender);return function(e,t){return n=>{Wo(`Checking data: ${n.data} against filters: ${e}`),"string"==typeof e&&(e=[e]),e=e.filter((e=>null!=e&&""!==e));const r=new RegExp(e.join("|"),"i");(0===e.length||n.data.findIndex((e=>r.test(e)))<0)&&(Wo("Not excluded, sending to appender"),t(n))}}(e.exclude,r)};var zo={},Ko={exports:{}},qo={},Yo={fromCallback:function(e){return Object.defineProperty((function(){if("function"!=typeof arguments[arguments.length-1])return new Promise(((t,n)=>{arguments[arguments.length]=(e,r)=>{if(e)return n(e);t(r)},arguments.length++,e.apply(this,arguments)}));e.apply(this,arguments)}),"name",{value:e.name})},fromPromise:function(e){return Object.defineProperty((function(){const t=arguments[arguments.length-1];if("function"!=typeof t)return e.apply(this,arguments);e.apply(this,arguments).then((e=>t(null,e)),t)}),"name",{value:e.name})}};!function(e){const t=Yo.fromCallback,n=rt,r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((e=>"function"==typeof n[e]));Object.keys(n).forEach((t=>{"promises"!==t&&(e[t]=n[t])})),r.forEach((r=>{e[r]=t(n[r])})),e.exists=function(e,t){return"function"==typeof t?n.exists(e,t):new Promise((t=>n.exists(e,t)))},e.read=function(e,t,r,u,o,i){return"function"==typeof i?n.read(e,t,r,u,o,i):new Promise(((i,s)=>{n.read(e,t,r,u,o,((e,t,n)=>{if(e)return s(e);i({bytesRead:t,buffer:n})}))}))},e.write=function(e,t,...r){return"function"==typeof r[r.length-1]?n.write(e,t,...r):new Promise(((u,o)=>{n.write(e,t,...r,((e,t,n)=>{if(e)return o(e);u({bytesWritten:t,buffer:n})}))}))},"function"==typeof n.realpath.native&&(e.realpath.native=t(n.realpath.native))}(qo);const Xo=p.default;function Zo(e){return(e=Xo.normalize(Xo.resolve(e)).split(Xo.sep)).length>0?e[0]:null}const Qo=/[<>:"|?*]/;var ei=function(e){const t=Zo(e);return e=e.replace(t,""),Qo.test(e)};const ti=rt,ni=p.default,ri=ei,ui=parseInt("0777",8);var oi=function e(t,n,r,u){if("function"==typeof n?(r=n,n={}):n&&"object"==typeof n||(n={mode:n}),"win32"===process.platform&&ri(t)){const e=new Error(t+" contains invalid WIN32 path characters.");return e.code="EINVAL",r(e)}let o=n.mode;const i=n.fs||ti;void 0===o&&(o=ui&~process.umask()),u||(u=null),r=r||function(){},t=ni.resolve(t),i.mkdir(t,o,(o=>{if(!o)return r(null,u=u||t);if("ENOENT"===o.code){if(ni.dirname(t)===t)return r(o);e(ni.dirname(t),n,((u,o)=>{u?r(u,o):e(t,n,r,o)}))}else i.stat(t,((e,t)=>{e||!t.isDirectory()?r(o,u):r(null,u)}))}))};const ii=rt,si=p.default,ci=ei,ai=parseInt("0777",8);var li=function e(t,n,r){n&&"object"==typeof n||(n={mode:n});let u=n.mode;const o=n.fs||ii;if("win32"===process.platform&&ci(t)){const e=new Error(t+" contains invalid WIN32 path characters.");throw e.code="EINVAL",e}void 0===u&&(u=ai&~process.umask()),r||(r=null),t=si.resolve(t);try{o.mkdirSync(t,u),r=r||t}catch(u){if("ENOENT"===u.code){if(si.dirname(t)===t)throw u;r=e(si.dirname(t),n,r),e(t,n,r)}else{let e;try{e=o.statSync(t)}catch(e){throw u}if(!e.isDirectory())throw u}}return r};const fi=(0,Yo.fromCallback)(oi);var di={mkdirs:fi,mkdirsSync:li,mkdirp:fi,mkdirpSync:li,ensureDir:fi,ensureDirSync:li};const Di=rt;h.default,p.default;var pi=function(e,t,n,r){Di.open(e,"r+",((e,u)=>{if(e)return r(e);Di.futimes(u,t,n,(e=>{Di.close(u,(t=>{r&&r(e||t)}))}))}))},hi=function(e,t,n){const r=Di.openSync(e,"r+");return Di.futimesSync(r,t,n),Di.closeSync(r)};const mi=rt,yi=p.default,Ei=10,Ci=5,Fi=0,gi=process.versions.node.split("."),Ai=Number.parseInt(gi[0],10),vi=Number.parseInt(gi[1],10),Si=Number.parseInt(gi[2],10);function wi(){if(Ai>Ei)return!0;if(Ai===Ei){if(vi>Ci)return!0;if(vi===Ci&&Si>=Fi)return!0}return!1}function bi(e,t){const n=yi.resolve(e).split(yi.sep).filter((e=>e)),r=yi.resolve(t).split(yi.sep).filter((e=>e));return n.reduce(((e,t,n)=>e&&r[n]===t),!0)}function Oi(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}var Bi,_i,ki={checkPaths:function(e,t,n,r){!function(e,t,n){wi()?mi.stat(e,{bigint:!0},((e,r)=>{if(e)return n(e);mi.stat(t,{bigint:!0},((e,t)=>e?"ENOENT"===e.code?n(null,{srcStat:r,destStat:null}):n(e):n(null,{srcStat:r,destStat:t})))})):mi.stat(e,((e,r)=>{if(e)return n(e);mi.stat(t,((e,t)=>e?"ENOENT"===e.code?n(null,{srcStat:r,destStat:null}):n(e):n(null,{srcStat:r,destStat:t})))}))}(e,t,((u,o)=>{if(u)return r(u);const{srcStat:i,destStat:s}=o;return s&&s.ino&&s.dev&&s.ino===i.ino&&s.dev===i.dev?r(new Error("Source and destination must not be the same.")):i.isDirectory()&&bi(e,t)?r(new Error(Oi(e,t,n))):r(null,{srcStat:i,destStat:s})}))},checkPathsSync:function(e,t,n){const{srcStat:r,destStat:u}=function(e,t){let n,r;n=wi()?mi.statSync(e,{bigint:!0}):mi.statSync(e);try{r=wi()?mi.statSync(t,{bigint:!0}):mi.statSync(t)}catch(e){if("ENOENT"===e.code)return{srcStat:n,destStat:null};throw e}return{srcStat:n,destStat:r}}(e,t);if(u&&u.ino&&u.dev&&u.ino===r.ino&&u.dev===r.dev)throw new Error("Source and destination must not be the same.");if(r.isDirectory()&&bi(e,t))throw new Error(Oi(e,t,n));return{srcStat:r,destStat:u}},checkParentPaths:function e(t,n,r,u,o){const i=yi.resolve(yi.dirname(t)),s=yi.resolve(yi.dirname(r));if(s===i||s===yi.parse(s).root)return o();wi()?mi.stat(s,{bigint:!0},((i,c)=>i?"ENOENT"===i.code?o():o(i):c.ino&&c.dev&&c.ino===n.ino&&c.dev===n.dev?o(new Error(Oi(t,r,u))):e(t,n,s,u,o))):mi.stat(s,((i,c)=>i?"ENOENT"===i.code?o():o(i):c.ino&&c.dev&&c.ino===n.ino&&c.dev===n.dev?o(new Error(Oi(t,r,u))):e(t,n,s,u,o)))},checkParentPathsSync:function e(t,n,r,u){const o=yi.resolve(yi.dirname(t)),i=yi.resolve(yi.dirname(r));if(i===o||i===yi.parse(i).root)return;let s;try{s=wi()?mi.statSync(i,{bigint:!0}):mi.statSync(i)}catch(e){if("ENOENT"===e.code)return;throw e}if(s.ino&&s.dev&&s.ino===n.ino&&s.dev===n.dev)throw new Error(Oi(t,r,u));return e(t,n,i,u)},isSrcSubdir:bi};const xi=rt,Pi=p.default,Ni=di.mkdirsSync,Ii=hi,Ti=ki;function Ri(e,t,n,r){if(!r.filter||r.filter(t,n))return function(e,t,n,r){const u=r.dereference?xi.statSync:xi.lstatSync,o=u(t);if(o.isDirectory())return function(e,t,n,r,u){if(!t)return function(e,t,n,r){return xi.mkdirSync(n),ji(t,n,r),xi.chmodSync(n,e.mode)}(e,n,r,u);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${r}' with directory '${n}'.`);return ji(n,r,u)}(o,e,t,n,r);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return function(e,t,n,r,u){return t?function(e,t,n,r){if(r.overwrite)return xi.unlinkSync(n),Mi(e,t,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}(e,n,r,u):Mi(e,n,r,u)}(o,e,t,n,r);if(o.isSymbolicLink())return function(e,t,n,r){let u=xi.readlinkSync(t);r.dereference&&(u=Pi.resolve(process.cwd(),u));if(e){let e;try{e=xi.readlinkSync(n)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return xi.symlinkSync(u,n);throw e}if(r.dereference&&(e=Pi.resolve(process.cwd(),e)),Ti.isSrcSubdir(u,e))throw new Error(`Cannot copy '${u}' to a subdirectory of itself, '${e}'.`);if(xi.statSync(n).isDirectory()&&Ti.isSrcSubdir(e,u))throw new Error(`Cannot overwrite '${e}' with '${u}'.`);return function(e,t){return xi.unlinkSync(t),xi.symlinkSync(e,t)}(u,n)}return xi.symlinkSync(u,n)}(e,t,n,r)}(e,t,n,r)}function Mi(e,t,n,r){return"function"==typeof xi.copyFileSync?(xi.copyFileSync(t,n),xi.chmodSync(n,e.mode),r.preserveTimestamps?Ii(n,e.atime,e.mtime):void 0):function(e,t,n,r){const u=65536,o=(_i?Bi:(_i=1,Bi=function(e){if("function"==typeof Buffer.allocUnsafe)try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}return new Buffer(e)}))(u),i=xi.openSync(t,"r"),s=xi.openSync(n,"w",e.mode);let c=0;for(;c<e.size;){const e=xi.readSync(i,o,0,u,c);xi.writeSync(s,o,0,e),c+=e}r.preserveTimestamps&&xi.futimesSync(s,e.atime,e.mtime);xi.closeSync(i),xi.closeSync(s)}(e,t,n,r)}function ji(e,t,n){xi.readdirSync(e).forEach((r=>function(e,t,n,r){const u=Pi.join(t,e),o=Pi.join(n,e),{destStat:i}=Ti.checkPathsSync(u,o,"copy");return Ri(i,u,o,r)}(r,e,t,n)))}var Li=function(e,t,n){"function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const{srcStat:r,destStat:u}=Ti.checkPathsSync(e,t,"copy");return Ti.checkParentPathsSync(e,r,t,"copy"),function(e,t,n,r){if(r.filter&&!r.filter(t,n))return;const u=Pi.dirname(n);xi.existsSync(u)||Ni(u);return Ri(e,t,n,r)}(u,e,t,n)},$i={copySync:Li};const Hi=Yo.fromPromise,Ji=qo;var Gi={pathExists:Hi((function(e){return Ji.access(e).then((()=>!0)).catch((()=>!1))})),pathExistsSync:Ji.existsSync};const Ui=rt,Vi=p.default,Wi=di.mkdirs,zi=Gi.pathExists,Ki=pi,qi=ki;function Yi(e,t,n,r,u){const o=Vi.dirname(n);zi(o,((i,s)=>i?u(i):s?Zi(e,t,n,r,u):void Wi(o,(o=>o?u(o):Zi(e,t,n,r,u)))))}function Xi(e,t,n,r,u,o){Promise.resolve(u.filter(n,r)).then((i=>i?e(t,n,r,u,o):o()),(e=>o(e)))}function Zi(e,t,n,r,u){return r.filter?Xi(Qi,e,t,n,r,u):Qi(e,t,n,r,u)}function Qi(e,t,n,r,u){(r.dereference?Ui.stat:Ui.lstat)(t,((o,i)=>o?u(o):i.isDirectory()?function(e,t,n,r,u,o){if(!t)return function(e,t,n,r,u){Ui.mkdir(n,(o=>{if(o)return u(o);ns(t,n,r,(t=>t?u(t):Ui.chmod(n,e.mode,u)))}))}(e,n,r,u,o);if(t&&!t.isDirectory())return o(new Error(`Cannot overwrite non-directory '${r}' with directory '${n}'.`));return ns(n,r,u,o)}(i,e,t,n,r,u):i.isFile()||i.isCharacterDevice()||i.isBlockDevice()?function(e,t,n,r,u,o){return t?function(e,t,n,r,u){if(!r.overwrite)return r.errorOnExist?u(new Error(`'${n}' already exists`)):u();Ui.unlink(n,(o=>o?u(o):es(e,t,n,r,u)))}(e,n,r,u,o):es(e,n,r,u,o)}(i,e,t,n,r,u):i.isSymbolicLink()?function(e,t,n,r,u){Ui.readlink(t,((t,o)=>t?u(t):(r.dereference&&(o=Vi.resolve(process.cwd(),o)),e?void Ui.readlink(n,((t,i)=>t?"EINVAL"===t.code||"UNKNOWN"===t.code?Ui.symlink(o,n,u):u(t):(r.dereference&&(i=Vi.resolve(process.cwd(),i)),qi.isSrcSubdir(o,i)?u(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${i}'.`)):e.isDirectory()&&qi.isSrcSubdir(i,o)?u(new Error(`Cannot overwrite '${i}' with '${o}'.`)):function(e,t,n){Ui.unlink(t,(r=>r?n(r):Ui.symlink(e,t,n)))}(o,n,u)))):Ui.symlink(o,n,u))))}(e,t,n,r,u):void 0))}function es(e,t,n,r,u){return"function"==typeof Ui.copyFile?Ui.copyFile(t,n,(t=>t?u(t):ts(e,n,r,u))):function(e,t,n,r,u){const o=Ui.createReadStream(t);o.on("error",(e=>u(e))).once("open",(()=>{const t=Ui.createWriteStream(n,{mode:e.mode});t.on("error",(e=>u(e))).on("open",(()=>o.pipe(t))).once("close",(()=>ts(e,n,r,u)))}))}(e,t,n,r,u)}function ts(e,t,n,r){Ui.chmod(t,e.mode,(u=>u?r(u):n.preserveTimestamps?Ki(t,e.atime,e.mtime,r):r()))}function ns(e,t,n,r){Ui.readdir(e,((u,o)=>u?r(u):rs(o,e,t,n,r)))}function rs(e,t,n,r,u){const o=e.pop();return o?function(e,t,n,r,u,o){const i=Vi.join(n,t),s=Vi.join(r,t);qi.checkPaths(i,s,"copy",((t,c)=>{if(t)return o(t);const{destStat:a}=c;Zi(a,i,s,u,(t=>t?o(t):rs(e,n,r,u,o)))}))}(e,o,t,n,r,u):u()}var us=function(e,t,n,r){"function"!=typeof n||r?"function"==typeof n&&(n={filter:n}):(r=n,n={}),r=r||function(){},(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),qi.checkPaths(e,t,"copy",((u,o)=>{if(u)return r(u);const{srcStat:i,destStat:s}=o;qi.checkParentPaths(e,i,t,"copy",(u=>u?r(u):n.filter?Xi(Yi,s,e,t,n,r):Yi(s,e,t,n,r)))}))};var os={copy:(0,Yo.fromCallback)(us)};const is=rt,ss=p.default,cs=F.default,as="win32"===process.platform;function ls(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||is[t],e[t+="Sync"]=e[t]||is[t]})),e.maxBusyTries=e.maxBusyTries||3}function fs(e,t,n){let r=0;"function"==typeof t&&(n=t,t={}),cs(e,"rimraf: missing path"),cs.strictEqual(typeof e,"string","rimraf: path should be a string"),cs.strictEqual(typeof n,"function","rimraf: callback function required"),cs(t,"rimraf: invalid options argument provided"),cs.strictEqual(typeof t,"object","rimraf: options should be object"),ls(t),ds(e,t,(function u(o){if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&r<t.maxBusyTries){r++;return setTimeout((()=>ds(e,t,u)),100*r)}"ENOENT"===o.code&&(o=null)}n(o)}))}function ds(e,t,n){cs(e),cs(t),cs("function"==typeof n),t.lstat(e,((r,u)=>r&&"ENOENT"===r.code?n(null):r&&"EPERM"===r.code&&as?Ds(e,t,r,n):u&&u.isDirectory()?hs(e,t,r,n):void t.unlink(e,(r=>{if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return as?Ds(e,t,r,n):hs(e,t,r,n);if("EISDIR"===r.code)return hs(e,t,r,n)}return n(r)}))))}function Ds(e,t,n,r){cs(e),cs(t),cs("function"==typeof r),n&&cs(n instanceof Error),t.chmod(e,438,(u=>{u?r("ENOENT"===u.code?null:n):t.stat(e,((u,o)=>{u?r("ENOENT"===u.code?null:n):o.isDirectory()?hs(e,t,n,r):t.unlink(e,r)}))}))}function ps(e,t,n){let r;cs(e),cs(t),n&&cs(n instanceof Error);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw n}try{r=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}r.isDirectory()?ys(e,t,n):t.unlinkSync(e)}function hs(e,t,n,r){cs(e),cs(t),n&&cs(n instanceof Error),cs("function"==typeof r),t.rmdir(e,(u=>{!u||"ENOTEMPTY"!==u.code&&"EEXIST"!==u.code&&"EPERM"!==u.code?u&&"ENOTDIR"===u.code?r(n):r(u):function(e,t,n){cs(e),cs(t),cs("function"==typeof n),t.readdir(e,((r,u)=>{if(r)return n(r);let o,i=u.length;if(0===i)return t.rmdir(e,n);u.forEach((r=>{fs(ss.join(e,r),t,(r=>{if(!o)return r?n(o=r):void(0==--i&&t.rmdir(e,n))}))}))}))}(e,t,r)}))}function ms(e,t){let n;ls(t=t||{}),cs(e,"rimraf: missing path"),cs.strictEqual(typeof e,"string","rimraf: path should be a string"),cs(t,"rimraf: missing options"),cs.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&as&&ps(e,t,n)}try{n&&n.isDirectory()?ys(e,t,null):t.unlinkSync(e)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return as?ps(e,t,n):ys(e,t,n);if("EISDIR"!==n.code)throw n;ys(e,t,n)}}function ys(e,t,n){cs(e),cs(t),n&&cs(n instanceof Error);try{t.rmdirSync(e)}catch(r){if("ENOTDIR"===r.code)throw n;if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)!function(e,t){if(cs(e),cs(t),t.readdirSync(e).forEach((n=>ms(ss.join(e,n),t))),!as){return t.rmdirSync(e,t)}{const n=Date.now();do{try{return t.rmdirSync(e,t)}catch(e){}}while(Date.now()-n<500)}}(e,t);else if("ENOENT"!==r.code)throw r}}var Es=fs;fs.sync=ms;const Cs=Es;var Fs={remove:(0,Yo.fromCallback)(Cs),removeSync:Cs.sync};const gs=Yo.fromCallback,As=rt,vs=p.default,Ss=di,ws=Fs,bs=gs((function(e,t){t=t||function(){},As.readdir(e,((n,r)=>{if(n)return Ss.mkdirs(e,t);r=r.map((t=>vs.join(e,t))),function e(){const n=r.pop();if(!n)return t();ws.remove(n,(n=>{if(n)return t(n);e()}))}()}))}));function Os(e){let t;try{t=As.readdirSync(e)}catch(t){return Ss.mkdirsSync(e)}t.forEach((t=>{t=vs.join(e,t),ws.removeSync(t)}))}var Bs={emptyDirSync:Os,emptydirSync:Os,emptyDir:bs,emptydir:bs};const _s=Yo.fromCallback,ks=p.default,xs=rt,Ps=di,Ns=Gi.pathExists;var Is={createFile:_s((function(e,t){function n(){xs.writeFile(e,"",(e=>{if(e)return t(e);t()}))}xs.stat(e,((r,u)=>{if(!r&&u.isFile())return t();const o=ks.dirname(e);Ns(o,((e,r)=>e?t(e):r?n():void Ps.mkdirs(o,(e=>{if(e)return t(e);n()}))))}))})),createFileSync:function(e){let t;try{t=xs.statSync(e)}catch(e){}if(t&&t.isFile())return;const n=ks.dirname(e);xs.existsSync(n)||Ps.mkdirsSync(n),xs.writeFileSync(e,"")}};const Ts=Yo.fromCallback,Rs=p.default,Ms=rt,js=di,Ls=Gi.pathExists;var $s={createLink:Ts((function(e,t,n){function r(e,t){Ms.link(e,t,(e=>{if(e)return n(e);n(null)}))}Ls(t,((u,o)=>u?n(u):o?n(null):void Ms.lstat(e,(u=>{if(u)return u.message=u.message.replace("lstat","ensureLink"),n(u);const o=Rs.dirname(t);Ls(o,((u,i)=>u?n(u):i?r(e,t):void js.mkdirs(o,(u=>{if(u)return n(u);r(e,t)}))))}))))})),createLinkSync:function(e,t){if(Ms.existsSync(t))return;try{Ms.lstatSync(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const n=Rs.dirname(t);return Ms.existsSync(n)||js.mkdirsSync(n),Ms.linkSync(e,t)}};const Hs=p.default,Js=rt,Gs=Gi.pathExists;var Us={symlinkPaths:function(e,t,n){if(Hs.isAbsolute(e))return Js.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:e})));{const r=Hs.dirname(t),u=Hs.join(r,e);return Gs(u,((t,o)=>t?n(t):o?n(null,{toCwd:u,toDst:e}):Js.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:Hs.relative(r,e)})))))}},symlinkPathsSync:function(e,t){let n;if(Hs.isAbsolute(e)){if(n=Js.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const r=Hs.dirname(t),u=Hs.join(r,e);if(n=Js.existsSync(u),n)return{toCwd:u,toDst:e};if(n=Js.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:Hs.relative(r,e)}}}};const Vs=rt;var Ws={symlinkType:function(e,t,n){if(n="function"==typeof t?t:n,t="function"!=typeof t&&t)return n(null,t);Vs.lstat(e,((e,r)=>{if(e)return n(null,"file");t=r&&r.isDirectory()?"dir":"file",n(null,t)}))},symlinkTypeSync:function(e,t){let n;if(t)return t;try{n=Vs.lstatSync(e)}catch(e){return"file"}return n&&n.isDirectory()?"dir":"file"}};const zs=Yo.fromCallback,Ks=p.default,qs=rt,Ys=di.mkdirs,Xs=di.mkdirsSync,Zs=Us.symlinkPaths,Qs=Us.symlinkPathsSync,ec=Ws.symlinkType,tc=Ws.symlinkTypeSync,nc=Gi.pathExists;var rc={createSymlink:zs((function(e,t,n,r){r="function"==typeof n?n:r,n="function"!=typeof n&&n,nc(t,((u,o)=>u?r(u):o?r(null):void Zs(e,t,((u,o)=>{if(u)return r(u);e=o.toDst,ec(o.toCwd,n,((n,u)=>{if(n)return r(n);const o=Ks.dirname(t);nc(o,((n,i)=>n?r(n):i?qs.symlink(e,t,u,r):void Ys(o,(n=>{if(n)return r(n);qs.symlink(e,t,u,r)}))))}))}))))})),createSymlinkSync:function(e,t,n){if(qs.existsSync(t))return;const r=Qs(e,t);e=r.toDst,n=tc(r.toCwd,n);const u=Ks.dirname(t);return qs.existsSync(u)||Xs(u),qs.symlinkSync(e,t,n)}};var uc,oc={createFile:Is.createFile,createFileSync:Is.createFileSync,ensureFile:Is.createFile,ensureFileSync:Is.createFileSync,createLink:$s.createLink,createLinkSync:$s.createLinkSync,ensureLink:$s.createLink,ensureLinkSync:$s.createLinkSync,createSymlink:rc.createSymlink,createSymlinkSync:rc.createSymlinkSync,ensureSymlink:rc.createSymlink,ensureSymlinkSync:rc.createSymlinkSync};try{uc=rt}catch(e){uc=D.default}function ic(e,t){var n,r="\n";return"object"==typeof t&&null!==t&&(t.spaces&&(n=t.spaces),t.EOL&&(r=t.EOL)),JSON.stringify(e,t?t.replacer:null,n).replace(/\n/g,r)+r}function sc(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,"")}var cc={readFile:function(e,t,n){null==n&&(n=t,t={}),"string"==typeof t&&(t={encoding:t});var r=(t=t||{}).fs||uc,u=!0;"throws"in t&&(u=t.throws),r.readFile(e,t,(function(r,o){if(r)return n(r);var i;o=sc(o);try{i=JSON.parse(o,t?t.reviver:null)}catch(t){return u?(t.message=e+": "+t.message,n(t)):n(null,null)}n(null,i)}))},readFileSync:function(e,t){"string"==typeof(t=t||{})&&(t={encoding:t});var n=t.fs||uc,r=!0;"throws"in t&&(r=t.throws);try{var u=n.readFileSync(e,t);return u=sc(u),JSON.parse(u,t.reviver)}catch(t){if(r)throw t.message=e+": "+t.message,t;return null}},writeFile:function(e,t,n,r){null==r&&(r=n,n={});var u=(n=n||{}).fs||uc,o="";try{o=ic(t,n)}catch(e){return void(r&&r(e,null))}u.writeFile(e,o,n,r)},writeFileSync:function(e,t,n){var r=(n=n||{}).fs||uc,u=ic(t,n);return r.writeFileSync(e,u,n)}},ac=cc;const lc=Yo.fromCallback,fc=ac;var dc={readJson:lc(fc.readFile),readJsonSync:fc.readFileSync,writeJson:lc(fc.writeFile),writeJsonSync:fc.writeFileSync};const Dc=p.default,pc=di,hc=Gi.pathExists,mc=dc;var yc=function(e,t,n,r){"function"==typeof n&&(r=n,n={});const u=Dc.dirname(e);hc(u,((o,i)=>o?r(o):i?mc.writeJson(e,t,n,r):void pc.mkdirs(u,(u=>{if(u)return r(u);mc.writeJson(e,t,n,r)}))))};const Ec=rt,Cc=p.default,Fc=di,gc=dc;var Ac=function(e,t,n){const r=Cc.dirname(e);Ec.existsSync(r)||Fc.mkdirsSync(r),gc.writeJsonSync(e,t,n)};const vc=Yo.fromCallback,Sc=dc;Sc.outputJson=vc(yc),Sc.outputJsonSync=Ac,Sc.outputJSON=Sc.outputJson,Sc.outputJSONSync=Sc.outputJsonSync,Sc.writeJSON=Sc.writeJson,Sc.writeJSONSync=Sc.writeJsonSync,Sc.readJSON=Sc.readJson,Sc.readJSONSync=Sc.readJsonSync;var wc=Sc;const bc=rt,Oc=p.default,Bc=$i.copySync,_c=Fs.removeSync,kc=di.mkdirpSync,xc=ki;function Pc(e,t,n){try{bc.renameSync(e,t)}catch(r){if("EXDEV"!==r.code)throw r;return function(e,t,n){const r={overwrite:n,errorOnExist:!0};return Bc(e,t,r),_c(e)}(e,t,n)}}var Nc=function(e,t,n){const r=(n=n||{}).overwrite||n.clobber||!1,{srcStat:u}=xc.checkPathsSync(e,t,"move");return xc.checkParentPathsSync(e,u,t,"move"),kc(Oc.dirname(t)),function(e,t,n){if(n)return _c(t),Pc(e,t,n);if(bc.existsSync(t))throw new Error("dest already exists.");return Pc(e,t,n)}(e,t,r)},Ic={moveSync:Nc};const Tc=rt,Rc=p.default,Mc=os.copy,jc=Fs.remove,Lc=di.mkdirp,$c=Gi.pathExists,Hc=ki;function Jc(e,t,n,r){Tc.rename(e,t,(u=>u?"EXDEV"!==u.code?r(u):function(e,t,n,r){const u={overwrite:n,errorOnExist:!0};Mc(e,t,u,(t=>t?r(t):jc(e,r)))}(e,t,n,r):r()))}var Gc=function(e,t,n,r){"function"==typeof n&&(r=n,n={});const u=n.overwrite||n.clobber||!1;Hc.checkPaths(e,t,"move",((n,o)=>{if(n)return r(n);const{srcStat:i}=o;Hc.checkParentPaths(e,i,t,"move",(n=>{if(n)return r(n);Lc(Rc.dirname(t),(n=>n?r(n):function(e,t,n,r){if(n)return jc(t,(u=>u?r(u):Jc(e,t,n,r)));$c(t,((u,o)=>u?r(u):o?r(new Error("dest already exists.")):Jc(e,t,n,r)))}(e,t,u,r)))}))}))};var Uc={move:(0,Yo.fromCallback)(Gc)};const Vc=Yo.fromCallback,Wc=rt,zc=p.default,Kc=di,qc=Gi.pathExists;var Yc={outputFile:Vc((function(e,t,n,r){"function"==typeof n&&(r=n,n="utf8");const u=zc.dirname(e);qc(u,((o,i)=>o?r(o):i?Wc.writeFile(e,t,n,r):void Kc.mkdirs(u,(u=>{if(u)return r(u);Wc.writeFile(e,t,n,r)}))))})),outputFileSync:function(e,...t){const n=zc.dirname(e);if(Wc.existsSync(n))return Wc.writeFileSync(e,...t);Kc.mkdirsSync(n),Wc.writeFileSync(e,...t)}};!function(e){e.exports=Object.assign({},qo,$i,os,Bs,oc,wc,di,Ic,Uc,Yc,Gi,Fs);const t=D.default;Object.getOwnPropertyDescriptor(t,"promises")&&Object.defineProperty(e.exports,"promises",{get:()=>t.promises})}(Ko);const Xc=fu.exports("streamroller:fileNameFormatter"),Zc=p.default;const Qc=fu.exports("streamroller:fileNameParser"),ea=Iu.exports;const ta=fu.exports("streamroller:moveAndMaybeCompressFile"),na=Ko.exports,ra=A.default;var ua=async(e,t,n)=>{if(n=function(e){const t={mode:parseInt("0600",8),compress:!1},n=Object.assign({},t,e);return ta(`_parseOption: moveAndMaybeCompressFile called with option=${JSON.stringify(n)}`),n}(n),e!==t){if(await na.pathExists(e))if(ta(`moveAndMaybeCompressFile: moving file from ${e} to ${t} ${n.compress?"with":"without"} compress`),n.compress)await new Promise(((r,u)=>{let o=!1;const i=na.createWriteStream(t,{mode:n.mode,flags:"wx"}).on("open",(()=>{o=!0;const t=na.createReadStream(e).on("open",(()=>{t.pipe(ra.createGzip()).pipe(i)})).on("error",(t=>{ta(`moveAndMaybeCompressFile: error reading ${e}`,t),i.destroy(t)}))})).on("finish",(()=>{ta(`moveAndMaybeCompressFile: finished compressing ${t}, deleting ${e}`),na.unlink(e).then(r).catch((t=>{ta(`moveAndMaybeCompressFile: error deleting ${e}, truncating instead`,t),na.truncate(e).then(r).catch((t=>{ta(`moveAndMaybeCompressFile: error truncating ${e}`,t),u(t)}))}))})).on("error",(e=>{o?(ta(`moveAndMaybeCompressFile: error writing ${t}, deleting`,e),na.unlink(t).then((()=>{u(e)})).catch((e=>{ta(`moveAndMaybeCompressFile: error deleting ${t}`,e),u(e)}))):(ta(`moveAndMaybeCompressFile: error creating ${t}`,e),u(e))}))})).catch((()=>{}));else{ta(`moveAndMaybeCompressFile: renaming ${e} to ${t}`);try{await na.move(e,t,{overwrite:!0})}catch(n){if(ta(`moveAndMaybeCompressFile: error renaming ${e} to ${t}`,n),"ENOENT"!==n.code){ta("moveAndMaybeCompressFile: trying copy+truncate instead");try{await na.copy(e,t,{overwrite:!0}),await na.truncate(e)}catch(e){ta("moveAndMaybeCompressFile: error copy+truncate",e)}}}}}else ta("moveAndMaybeCompressFile: source and target are the same, not doing anything")};const oa=fu.exports("streamroller:RollingFileWriteStream"),ia=Ko.exports,sa=p.default,ca=h.default,aa=()=>new Date,la=Iu.exports,{Writable:fa}=E.default,da=({file:e,keepFileExt:t,needsIndex:n,alwaysIncludeDate:r,compress:u,fileNameSep:o})=>{let i=o||".";const s=Zc.join(e.dir,e.name),c=t=>t+e.ext,a=(e,t,r)=>!n&&r||!t?e:e+i+t,l=(e,t,n)=>(t>0||r)&&n?e+i+n:e,f=(e,t)=>t&&u?e+".gz":e,d=t?[l,a,c,f]:[c,l,a,f];return({date:e,index:t})=>(Xc(`_formatFileName: date=${e}, index=${t}`),d.reduce(((n,r)=>r(n,t,e)),s))},Da=({file:e,keepFileExt:t,pattern:n,fileNameSep:r})=>{let u=r||".";const o="__NOT_MATCHING__";let i=[(e,t)=>e.endsWith(".gz")?(Qc("it is gzipped"),t.isCompressed=!0,e.slice(0,-1*".gz".length)):e,t?t=>t.startsWith(e.name)&&t.endsWith(e.ext)?(Qc("it starts and ends with the right things"),t.slice(e.name.length+1,-1*e.ext.length)):o:t=>t.startsWith(e.base)?(Qc("it starts with the right things"),t.slice(e.base.length+1)):o,n?(e,t)=>{const r=e.split(u);let o=r[r.length-1];Qc("items: ",r,", indexStr: ",o);let i=e;void 0!==o&&o.match(/^\d+$/)?(i=e.slice(0,-1*(o.length+1)),Qc(`dateStr is ${i}`),n&&!i&&(i=o,o="0")):o="0";try{const r=ea.parse(n,i,new Date(0,0));return ea.asString(n,r)!==i?e:(t.index=parseInt(o,10),t.date=i,t.timestamp=r.getTime(),"")}catch(t){return Qc(`Problem parsing ${i} as ${n}, error was: `,t),e}}:(e,t)=>e.match(/^\d+$/)?(Qc("it has an index"),t.index=parseInt(e,10),""):e];return e=>{let t={filename:e,index:0,isCompressed:!1};return i.reduce(((e,n)=>n(e,t)),e)?null:t}},pa=ua;var ha=class extends fa{constructor(e,t){if(oa(`constructor: creating RollingFileWriteStream. path=${e}`),"string"!=typeof e||0===e.length)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(sa.sep))throw new Error(`Filename is a directory: ${e}`);0===e.indexOf(`~${sa.sep}`)&&(e=e.replace("~",ca.homedir())),super(t),this.options=this._parseOption(t),this.fileObject=sa.parse(e),""===this.fileObject.dir&&(this.fileObject=sa.parse(sa.join(process.cwd(),e))),this.fileFormatter=da({file:this.fileObject,alwaysIncludeDate:this.options.alwaysIncludePattern,needsIndex:this.options.maxSize<Number.MAX_SAFE_INTEGER,compress:this.options.compress,keepFileExt:this.options.keepFileExt,fileNameSep:this.options.fileNameSep}),this.fileNameParser=Da({file:this.fileObject,keepFileExt:this.options.keepFileExt,pattern:this.options.pattern,fileNameSep:this.options.fileNameSep}),this.state={currentSize:0},this.options.pattern&&(this.state.currentDate=la(this.options.pattern,aa())),this.filename=this.fileFormatter({index:0,date:this.state.currentDate}),["a","a+","as","as+"].includes(this.options.flags)&&this._setExistingSizeAndDate(),oa(`constructor: create new file ${this.filename}, state=${JSON.stringify(this.state)}`),this._renewWriteStream()}_setExistingSizeAndDate(){try{const e=ia.statSync(this.filename);this.state.currentSize=e.size,this.options.pattern&&(this.state.currentDate=la(this.options.pattern,e.mtime))}catch(e){return}}_parseOption(e){const t={maxSize:0,numToKeep:Number.MAX_SAFE_INTEGER,encoding:"utf8",mode:parseInt("0600",8),flags:"a",compress:!1,keepFileExt:!1,alwaysIncludePattern:!1},n=Object.assign({},t,e);if(n.maxSize){if(n.maxSize<=0)throw new Error(`options.maxSize (${n.maxSize}) should be > 0`)}else delete n.maxSize;if(n.numBackups||0===n.numBackups){if(n.numBackups<0)throw new Error(`options.numBackups (${n.numBackups}) should be >= 0`);if(n.numBackups>=Number.MAX_SAFE_INTEGER)throw new Error(`options.numBackups (${n.numBackups}) should be < Number.MAX_SAFE_INTEGER`);n.numToKeep=n.numBackups+1}else if(n.numToKeep<=0)throw new Error(`options.numToKeep (${n.numToKeep}) should be > 0`);return oa(`_parseOption: creating stream with option=${JSON.stringify(n)}`),n}_final(e){this.currentFileStream.end("",this.options.encoding,e)}_write(e,t,n){this._shouldRoll().then((()=>{oa(`_write: writing chunk. file=${this.currentFileStream.path} state=${JSON.stringify(this.state)} chunk=${e}`),this.currentFileStream.write(e,t,(t=>{this.state.currentSize+=e.length,n(t)}))}))}async _shouldRoll(){(this._dateChanged()||this._tooBig())&&(oa(`_shouldRoll: rolling because dateChanged? ${this._dateChanged()} or tooBig? ${this._tooBig()}`),await this._roll())}_dateChanged(){return this.state.currentDate&&this.state.currentDate!==la(this.options.pattern,aa())}_tooBig(){return this.state.currentSize>=this.options.maxSize}_roll(){return oa("_roll: closing the current stream"),new Promise(((e,t)=>{this.currentFileStream.end("",this.options.encoding,(()=>{this._moveOldFiles().then(e).catch(t)}))}))}async _moveOldFiles(){const e=await this._getExistingFiles();for(let t=(this.state.currentDate?e.filter((e=>e.date===this.state.currentDate)):e).length;t>=0;t--){oa(`_moveOldFiles: i = ${t}`);const e=this.fileFormatter({date:this.state.currentDate,index:t}),n=this.fileFormatter({date:this.state.currentDate,index:t+1}),r={compress:this.options.compress&&0===t,mode:this.options.mode};await pa(e,n,r)}this.state.currentSize=0,this.state.currentDate=this.state.currentDate?la(this.options.pattern,aa()):null,oa(`_moveOldFiles: finished rolling files. state=${JSON.stringify(this.state)}`),this._renewWriteStream(),await new Promise(((e,t)=>{this.currentFileStream.write("","utf8",(()=>{this._clean().then(e).catch(t)}))}))}async _getExistingFiles(){const e=await ia.readdir(this.fileObject.dir).catch((()=>[]));oa(`_getExistingFiles: files=${e}`);const t=e.map((e=>this.fileNameParser(e))).filter((e=>e)),n=e=>(e.timestamp?e.timestamp:aa().getTime())-e.index;return t.sort(((e,t)=>n(e)-n(t))),t}_renewWriteStream(){const e=this.fileFormatter({date:this.state.currentDate,index:0}),t=e=>{try{return ia.mkdirSync(e,{recursive:!0})}catch(n){if("ENOENT"===n.code)return t(sa.dirname(e)),t(e);if("EEXIST"!==n.code&&"EROFS"!==n.code)throw n;try{if(ia.statSync(e).isDirectory())return e;throw n}catch(e){throw n}}};t(this.fileObject.dir);const n={flags:this.options.flags,encoding:this.options.encoding,mode:this.options.mode};var r,u;ia.appendFileSync(e,"",(r={...n},u="flags",r["flag"]=r[u],delete r[u],r)),this.currentFileStream=ia.createWriteStream(e,n),this.currentFileStream.on("error",(e=>{this.emit("error",e)}))}async _clean(){const e=await this._getExistingFiles();if(oa(`_clean: numToKeep = ${this.options.numToKeep}, existingFiles = ${e.length}`),oa("_clean: existing files are: ",e),this._tooManyFiles(e.length)){const n=e.slice(0,e.length-this.options.numToKeep).map((e=>sa.format({dir:this.fileObject.dir,base:e.filename})));await(t=n,oa(`deleteFiles: files to delete: ${t}`),Promise.all(t.map((e=>ia.unlink(e).catch((t=>{oa(`deleteFiles: error when unlinking ${e}, ignoring. Error was ${t}`)}))))))}var t}_tooManyFiles(e){return this.options.numToKeep>0&&e>this.options.numToKeep}};const ma=ha;var ya=class extends ma{constructor(e,t,n,r){r||(r={}),t&&(r.maxSize=t),r.numBackups||0===r.numBackups||(n||0===n||(n=1),r.numBackups=n),super(e,r),this.backups=r.numBackups,this.size=this.options.maxSize}get theStream(){return this.currentFileStream}};const Ea=ha;var Ca={RollingFileWriteStream:ha,RollingFileStream:ya,DateRollingFileStream:class extends Ea{constructor(e,t,n){t&&"object"==typeof t&&(n=t,t=null),n||(n={}),t||(t="yyyy-MM-dd"),n.pattern=t,n.numBackups||0===n.numBackups?n.daysToKeep=n.numBackups:(n.daysToKeep||0===n.daysToKeep?process.emitWarning("options.daysToKeep is deprecated due to the confusion it causes when used together with file size rolling. Please use options.numBackups instead.","DeprecationWarning","streamroller-DEP0001"):n.daysToKeep=1,n.numBackups=n.daysToKeep),super(e,n),this.mode=this.options.mode}get theStream(){return this.currentFileStream}}};const Fa=fu.exports("log4js:file"),ga=p.default,Aa=Ca,va=h.default.EOL;let Sa=!1;const wa=new Set;function ba(){wa.forEach((e=>{e.sighupHandler()}))}function Oa(e,t,n,r){const u=new Aa.RollingFileStream(e,t,n,r);return u.on("error",(t=>{console.error("log4js.fileAppender - Writing to file %s, error happened ",e,t)})),u.on("drain",(()=>{process.emit("log4js:pause",!1)})),u}zo.configure=function(e,t){let n=t.basicLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),e.mode=e.mode||384,function(e,t,n,r,u,o){e=ga.normalize(e),Fa("Creating file appender (",e,", ",n,", ",r=r||0===r?r:5,", ",u,", ",o,")");let i=Oa(e,n,r,u);const s=function(e){if(i.writable){if(!0===u.removeColor){const t=/\x1b[[0-9;]*m/g;e.data=e.data.map((e=>"string"==typeof e?e.replace(t,""):e))}i.write(t(e,o)+va,"utf8")||process.emit("log4js:pause",!0)}};return s.reopen=function(){i.end((()=>{i=Oa(e,n,r,u)}))},s.sighupHandler=function(){Fa("SIGHUP handler called."),s.reopen()},s.shutdown=function(e){wa.delete(s),0===wa.size&&Sa&&(process.removeListener("SIGHUP",ba),Sa=!1),i.end("","utf-8",e)},wa.add(s),Sa||(process.on("SIGHUP",ba),Sa=!0),s}(e.filename,n,e.maxLogSize,e.backups,e,e.timezoneOffset)};var Ba={};const _a=Ca,ka=h.default.EOL;function xa(e,t,n,r,u){r.maxSize=r.maxLogSize;const o=function(e,t,n){const r=new _a.DateRollingFileStream(e,t,n);return r.on("error",(t=>{console.error("log4js.dateFileAppender - Writing to file %s, error happened ",e,t)})),r.on("drain",(()=>{process.emit("log4js:pause",!1)})),r}(e,t,r),i=function(e){o.writable&&(o.write(n(e,u)+ka,"utf8")||process.emit("log4js:pause",!0))};return i.shutdown=function(e){o.end("","utf-8",e)},i}Ba.configure=function(e,t){let n=t.basicLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),e.alwaysIncludePattern||(e.alwaysIncludePattern=!1),e.mode=e.mode||384,xa(e.filename,e.pattern,n,e,e.timezoneOffset)};var Pa={};const Na=fu.exports("log4js:fileSync"),Ia=p.default,Ta=D.default,Ra=h.default.EOL||"\n";function Ma(e,t){if(Ta.existsSync(e))return;const n=Ta.openSync(e,t.flags,t.mode);Ta.closeSync(n)}class ja{constructor(e,t,n,r){Na("In RollingFileStream"),function(){if(!e||!t||t<=0)throw new Error("You must specify a filename and file size")}(),this.filename=e,this.size=t,this.backups=n,this.options=r,this.currentSize=0,this.currentSize=function(e){let t=0;try{t=Ta.statSync(e).size}catch(t){Ma(e,r)}return t}(this.filename)}shouldRoll(){return Na("should roll with current size %d, and max size %d",this.currentSize,this.size),this.currentSize>=this.size}roll(e){const t=this,n=new RegExp(`^${Ia.basename(e)}`);function r(e){return n.test(e)}function u(t){return parseInt(t.substring(`${Ia.basename(e)}.`.length),10)||0}function o(e,t){return u(e)>u(t)?1:u(e)<u(t)?-1:0}function i(n){const r=u(n);if(Na(`Index of ${n} is ${r}`),0===t.backups)Ta.truncateSync(e,0);else if(r<t.backups){try{Ta.unlinkSync(`${e}.${r+1}`)}catch(e){}Na(`Renaming ${n} -> ${e}.${r+1}`),Ta.renameSync(Ia.join(Ia.dirname(e),n),`${e}.${r+1}`)}}Na("Rolling, rolling, rolling"),Na("Renaming the old files"),Ta.readdirSync(Ia.dirname(e)).filter(r).sort(o).reverse().forEach(i)}write(e,t){const n=this;Na("in write"),this.shouldRoll()&&(this.currentSize=0,this.roll(this.filename)),Na("writing the chunk to the file"),n.currentSize+=e.length,Ta.appendFileSync(n.filename,e)}}Pa.configure=function(e,t){let n=t.basicLayout;e.layout&&(n=t.layout(e.layout.type,e.layout));const r={flags:e.flags||"a",encoding:e.encoding||"utf8",mode:e.mode||384};return function(e,t,n,r,u,o){Na("fileSync appender created");const i=function(e,t,n){let r;var u;return t?r=new ja(e,t,n,o):(Ma(u=e,o),r={write(e){Ta.appendFileSync(u,e)}}),r}(e=Ia.normalize(e),n,r=r||0===r?r:5);return e=>{i.write(t(e,u)+Ra)}}(e.filename,n,e.maxLogSize,e.backups,e.timezoneOffset,r)};var La={};const $a=fu.exports("log4js:tcp"),Ha=v.default;La.configure=function(e,t){$a(`configure with config = ${e}`);let n=function(e){return e.serialise()};return e.layout&&(n=t.layout(e.layout.type,e.layout)),function(e,t){let n=!1;const r=[];let u,o=3,i="__LOG4JS__";function s(e){$a("Writing log event to socket"),n=u.write(`${t(e)}${i}`,"utf8")}function c(){let e;for($a("emptying buffer");e=r.shift();)s(e)}function a(e){n?s(e):($a("buffering log event because it cannot write at the moment"),r.push(e))}return function t(){$a(`appender creating socket to ${e.host||"localhost"}:${e.port||5e3}`),i=`${e.endMsg||"__LOG4JS__"}`,u=Ha.createConnection(e.port||5e3,e.host||"localhost"),u.on("connect",(()=>{$a("socket connected"),c(),n=!0})),u.on("drain",(()=>{$a("drain event received, emptying buffer"),n=!0,c()})),u.on("timeout",u.end.bind(u)),u.on("error",(e=>{$a("connection error",e),n=!1,c()})),u.on("close",t)}(),a.shutdown=function(e){$a("shutdown called"),r.length&&o?($a("buffer has items, waiting 100ms to empty"),o-=1,setTimeout((()=>{a.shutdown(e)}),100)):(u.removeAllListeners("close"),u.end(e))},a}(e,n)};const Ja=p.default,Ga=fu.exports("log4js:appenders"),Ua=Nu,Va=No,Wa=Qu,za=qu,Ka=Io,qa=new Map;qa.set("console",jo),qa.set("stdout",$o),qa.set("stderr",Ho),qa.set("logLevelFilter",Jo),qa.set("categoryFilter",Go),qa.set("noLogFilter",Vo),qa.set("file",zo),qa.set("dateFile",Ba),qa.set("fileSync",Pa),qa.set("tcp",La);const Ya=new Map,Xa=(e,t)=>{Ga("Loading module from ",e);try{return require(e)}catch(n){return void Ua.throwExceptionIf(t,"MODULE_NOT_FOUND"!==n.code,`appender "${e}" could not be loaded (error was: ${n})`)}},Za=new Set,Qa=(e,t)=>{if(Ya.has(e))return Ya.get(e);if(!t.appenders[e])return!1;if(Za.has(e))throw new Error(`Dependency loop detected for appender ${e}.`);Za.add(e),Ga(`Creating appender ${e}`);const n=el(e,t);return Za.delete(e),Ya.set(e,n),n},el=(e,t)=>{const n=t.appenders[e],r=n.type.configure?n.type:((e,t)=>qa.get(e)||Xa(`./${e}`,t)||Xa(e,t)||require.main&&Xa(Ja.join(Ja.dirname(require.main.filename),e),t)||Xa(Ja.join(process.cwd(),e),t))(n.type,t);return Ua.throwExceptionIf(t,Ua.not(r),`appender "${e}" is not valid (type "${n.type}" could not be found)`),r.appender&&Ga(`DEPRECATION: Appender ${n.type} exports an appender function.`),r.shutdown&&Ga(`DEPRECATION: Appender ${n.type} exports a shutdown function.`),Ga(`${e}: clustering.isMaster ? ${Va.isMaster()}`),Ga(`${e}: appenderModule is ${C.default.inspect(r)}`),Va.onlyOnMaster((()=>(Ga(`calling appenderModule.configure for ${e} / ${n.type}`),r.configure(Ka.modifyConfig(n),za,(e=>Qa(e,t)),Wa))),(()=>{}))},tl=e=>{Ya.clear(),Za.clear();const t=[];Object.values(e.categories).forEach((e=>{t.push(...e.appenders)})),Object.keys(e.appenders).forEach((n=>{(t.includes(n)||"tcp-server"===e.appenders[n].type)&&Qa(n,e)}))},nl=()=>{tl({appenders:{out:{type:"stdout"}},categories:{default:{appenders:["out"],level:"trace"}}})};nl(),Ua.addListener((e=>{Ua.throwExceptionIf(e,Ua.not(Ua.anObject(e.appenders)),'must have a property "appenders" of type object.');const t=Object.keys(e.appenders);Ua.throwExceptionIf(e,Ua.not(t.length),"must define at least one appender."),t.forEach((t=>{Ua.throwExceptionIf(e,Ua.not(e.appenders[t].type),`appender "${t}" is not valid (must be an object with property "type")`)}))})),Ua.addListener(tl),eo.exports=Ya,eo.exports.init=nl;var rl={exports:{}};!function(e){const t=fu.exports("log4js:categories"),n=Nu,r=Qu,u=eo.exports,o=new Map;function i(e,t,n){if(!1===t.inherit)return;const r=n.lastIndexOf(".");if(r<0)return;const u=n.substring(0,r);let o=e.categories[u];o||(o={inherit:!0,appenders:[]}),i(e,o,u),!e.categories[u]&&o.appenders&&o.appenders.length&&o.level&&(e.categories[u]=o),t.appenders=t.appenders||[],t.level=t.level||o.level,o.appenders.forEach((e=>{t.appenders.includes(e)||t.appenders.push(e)})),t.parent=o}function s(e){if(!e.categories)return;Object.keys(e.categories).forEach((t=>{const n=e.categories[t];i(e,n,t)}))}n.addPreProcessingListener((e=>s(e))),n.addListener((e=>{n.throwExceptionIf(e,n.not(n.anObject(e.categories)),'must have a property "categories" of type object.');const t=Object.keys(e.categories);n.throwExceptionIf(e,n.not(t.length),"must define at least one category."),t.forEach((t=>{const o=e.categories[t];n.throwExceptionIf(e,[n.not(o.appenders),n.not(o.level)],`category "${t}" is not valid (must be an object with properties "appenders" and "level")`),n.throwExceptionIf(e,n.not(Array.isArray(o.appenders)),`category "${t}" is not valid (appenders must be an array of appender names)`),n.throwExceptionIf(e,n.not(o.appenders.length),`category "${t}" is not valid (appenders must contain at least one appender name)`),Object.prototype.hasOwnProperty.call(o,"enableCallStack")&&n.throwExceptionIf(e,"boolean"!=typeof o.enableCallStack,`category "${t}" is not valid (enableCallStack must be boolean type)`),o.appenders.forEach((r=>{n.throwExceptionIf(e,n.not(u.get(r)),`category "${t}" is not valid (appender "${r}" is not defined)`)})),n.throwExceptionIf(e,n.not(r.getLevel(o.level)),`category "${t}" is not valid (level "${o.level}" not recognised; valid levels are ${r.levels.join(", ")})`)})),n.throwExceptionIf(e,n.not(e.categories.default),'must define a "default" category.')}));const c=e=>{o.clear();Object.keys(e.categories).forEach((n=>{const i=e.categories[n],s=[];i.appenders.forEach((e=>{s.push(u.get(e)),t(`Creating category ${n}`),o.set(n,{appenders:s,level:r.getLevel(i.level),enableCallStack:i.enableCallStack||!1})}))}))},a=()=>{c({categories:{default:{appenders:["out"],level:"OFF"}}})};a(),n.addListener(c);const l=e=>(t(`configForCategory: searching for config for ${e}`),o.has(e)?(t(`configForCategory: ${e} exists in config, returning it`),o.get(e)):e.indexOf(".")>0?(t(`configForCategory: ${e} has hierarchy, searching for parents`),l(e.substring(0,e.lastIndexOf(".")))):(t("configForCategory: returning config for default category"),l("default")));e.exports=o,e.exports=Object.assign(e.exports,{appendersForCategory:e=>l(e).appenders,getLevelForCategory:e=>l(e).level,setLevelForCategory:(e,n)=>{let r=o.get(e);if(t(`setLevelForCategory: found ${r} for ${e}`),!r){const n=l(e);t(`setLevelForCategory: no config found for category, found ${n} for parents of ${e}`),r={appenders:n.appenders}}r.level=n,o.set(e,r)},getEnableCallStackForCategory:e=>!0===l(e).enableCallStack,setEnableCallStackForCategory:(e,t)=>{l(e).enableCallStack=t},init:a})}(rl);const ul=fu.exports("log4js:logger"),ol=Fo,il=Qu,sl=No,cl=rl.exports,al=Nu,ll=/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/;function fl(e,t=4){const n=e.stack.split("\n").slice(t),r=ll.exec(n[0]);return r&&6===r.length?{functionName:r[1],fileName:r[2],lineNumber:parseInt(r[3],10),columnNumber:parseInt(r[4],10),callStack:n.join("\n")}:null}class dl{constructor(e){if(!e)throw new Error("No category provided.");this.category=e,this.context={},this.parseCallStack=fl,ul(`Logger created (${this.category}, ${this.level})`)}get level(){return il.getLevel(cl.getLevelForCategory(this.category),il.TRACE)}set level(e){cl.setLevelForCategory(this.category,il.getLevel(e,this.level))}get useCallStack(){return cl.getEnableCallStackForCategory(this.category)}set useCallStack(e){cl.setEnableCallStackForCategory(this.category,!0===e)}log(e,...t){let n=il.getLevel(e);n||(this._log(il.WARN,"log4js:logger.log: invalid value for log-level as first parameter given: ",e),n=il.INFO),this.isLevelEnabled(n)&&this._log(n,t)}isLevelEnabled(e){return this.level.isLessThanOrEqualTo(e)}_log(e,t){ul(`sending log data (${e}) to appenders`);const n=new ol(this.category,e,t,this.context,this.useCallStack&&this.parseCallStack(new Error));sl.send(n)}addContext(e,t){this.context[e]=t}removeContext(e){delete this.context[e]}clearContext(){this.context={}}setParseCallStackFunction(e){this.parseCallStack=e}}function Dl(e){const t=il.getLevel(e),n=t.toString().toLowerCase().replace(/_([a-z])/g,(e=>e[1].toUpperCase())),r=n[0].toUpperCase()+n.slice(1);dl.prototype[`is${r}Enabled`]=function(){return this.isLevelEnabled(t)},dl.prototype[n]=function(...e){this.log(t,...e)}}il.levels.forEach(Dl),al.addListener((()=>{il.levels.forEach(Dl)}));var pl=dl;const hl=Qu;function ml(e){return e.originalUrl||e.url}function yl(e,t){for(let n=0;n<t.length;n++)e=e.replace(t[n].token,t[n].replacement);return e}const El=fu.exports("log4js:recording"),Cl=[];function Fl(){return Cl.slice()}function gl(){Cl.length=0}var Al={configure:function(){return function(e){El(`received logEvent, number of events now ${Cl.length+1}`),El("log event was ",e),Cl.push(e)}},replay:Fl,playback:Fl,reset:gl,erase:gl};const vl=fu.exports("log4js:main"),Sl=D.default,wl=Su({proto:!0}),bl=Nu,Ol=qu,Bl=Qu,_l=eo.exports,kl=rl.exports,xl=pl,Pl=No,Nl=function(e,t){t="string"==typeof t||"function"==typeof t?{format:t}:t||{};const n=e;let r=hl.getLevel(t.level,hl.INFO);const u=t.format||':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"',o=function(e){let t=null;if(e instanceof RegExp&&(t=e),"string"==typeof e&&(t=new RegExp(e)),Array.isArray(e)){const n=e.map((e=>e.source?e.source:e));t=new RegExp(n.join("|"))}return t}(t.nolog);return(e,i,s)=>{if(e._logging)return s();if(o&&o.test(e.originalUrl))return s();if(n.isLevelEnabled(r)||"auto"===t.level){const o=new Date,{writeHead:s}=i;e._logging=!0,i.writeHead=(e,t)=>{i.writeHead=s,i.writeHead(e,t),i.__statusCode=e,i.__headers=t||{}},i.on("finish",(()=>{i.responseTime=new Date-o,i.statusCode&&"auto"===t.level&&(r=hl.INFO,i.statusCode>=300&&(r=hl.WARN),i.statusCode>=400&&(r=hl.ERROR)),r=function(e,t,n){let r=t;if(n){const t=n.find((t=>{let n=!1;return n=t.from&&t.to?e>=t.from&&e<=t.to:-1!==t.codes.indexOf(e),n}));t&&(r=hl.getLevel(t.level,r))}return r}(i.statusCode,r,t.statusRules);const s=function(e,t,n){const r=[];return r.push({token:":url",replacement:ml(e)}),r.push({token:":protocol",replacement:e.protocol}),r.push({token:":hostname",replacement:e.hostname}),r.push({token:":method",replacement:e.method}),r.push({token:":status",replacement:t.__statusCode||t.statusCode}),r.push({token:":response-time",replacement:t.responseTime}),r.push({token:":date",replacement:(new Date).toUTCString()}),r.push({token:":referrer",replacement:e.headers.referer||e.headers.referrer||""}),r.push({token:":http-version",replacement:`${e.httpVersionMajor}.${e.httpVersionMinor}`}),r.push({token:":remote-addr",replacement:e.headers["x-forwarded-for"]||e.ip||e._remoteAddress||e.socket&&(e.socket.remoteAddress||e.socket.socket&&e.socket.socket.remoteAddress)}),r.push({token:":user-agent",replacement:e.headers["user-agent"]}),r.push({token:":content-length",replacement:t.getHeader("content-length")||t.__headers&&t.__headers["Content-Length"]||"-"}),r.push({token:/:req\[([^\]]+)]/g,replacement:(t,n)=>e.headers[n.toLowerCase()]}),r.push({token:/:res\[([^\]]+)]/g,replacement:(e,n)=>t.getHeader(n.toLowerCase())||t.__headers&&t.__headers[n]}),(e=>{const t=e.concat();for(let e=0;e<t.length;++e)for(let n=e+1;n<t.length;++n)t[e].token==t[n].token&&t.splice(n--,1);return t})(n.concat(r))}(e,i,t.tokens||[]);if(t.context&&n.addContext("res",i),"function"==typeof u){const t=u(e,i,(e=>yl(e,s)));t&&n.log(r,t)}else n.log(r,yl(u,s));t.context&&n.removeContext("res")}))}return s()}},Il=Al;let Tl=!1;function Rl(e){if(!Tl)return;vl("Received log event ",e);kl.appendersForCategory(e.categoryName).forEach((t=>{t(e)}))}function Ml(e){Tl&&jl();let t=e;return"string"==typeof t&&(t=function(e){vl(`Loading configuration from ${e}`);try{return JSON.parse(Sl.readFileSync(e,"utf8"))}catch(t){throw new Error(`Problem reading config from file "${e}". Error was ${t.message}`,t)}}(e)),vl(`Configuration is ${t}`),bl.configure(wl(t)),Pl.onMessage(Rl),Tl=!0,Ll}function jl(e){vl("Shutdown called. Disabling all log writing."),Tl=!1;const t=Array.from(_l.values());_l.init(),kl.init();const n=t.reduceRight(((e,t)=>t.shutdown?e+1:e),0);if(0===n)return vl("No appenders with shutdown functions found."),void 0!==e&&e();let r,u=0;function o(t){r=r||t,u+=1,vl(`Appender shutdowns complete: ${u} / ${n}`),u>=n&&(vl("All shutdown functions completed."),e&&e(r))}return vl(`Found ${n} appenders with shutdown functions.`),t.filter((e=>e.shutdown)).forEach((e=>e.shutdown(o))),null}const Ll={getLogger:function(e){return Tl||Ml(process.env.LOG4JS_CONFIG||{appenders:{out:{type:"stdout"}},categories:{default:{appenders:["out"],level:"OFF"}}}),new xl(e||"default")},configure:Ml,shutdown:jl,connectLogger:Nl,levels:Bl,addLayout:Ol.addLayout,recording:function(){return Il}};var $l=Ll,Hl={};Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.levelMap=Hl.getLevel=Hl.setCategoriesLevel=Hl.getConfiguration=Hl.setConfiguration=void 0;const Jl=$l;let Gl={appenders:{debug:{type:"stdout",layout:{type:"pattern",pattern:"[%d] > hvigor %p %c %[%m%]"}},info:{type:"stdout",layout:{type:"pattern",pattern:"[%d] > hvigor %[%m%]"}},"no-pattern-info":{type:"stdout",layout:{type:"pattern",pattern:"%m"}},wrong:{type:"stderr",layout:{type:"pattern",pattern:"[%d] > hvigor %[%p: %m%]"}},"just-debug":{type:"logLevelFilter",appender:"debug",level:"debug",maxLevel:"debug"},"just-info":{type:"logLevelFilter",appender:"info",level:"info",maxLevel:"info"},"just-wrong":{type:"logLevelFilter",appender:"wrong",level:"warn",maxLevel:"error"}},categories:{default:{appenders:["just-debug","just-info","just-wrong"],level:"debug"},"no-pattern-info":{appenders:["no-pattern-info"],level:"info"}}};Hl.setConfiguration=e=>{Gl=e};Hl.getConfiguration=()=>Gl;let Ul=Jl.levels.DEBUG;Hl.setCategoriesLevel=(e,t)=>{Ul=e;const n=Gl.categories;for(const r in n)(null==t?void 0:t.includes(r))||Object.prototype.hasOwnProperty.call(n,r)&&(n[r].level=e.levelStr)};Hl.getLevel=()=>Ul,Hl.levelMap=new Map([["ALL",Jl.levels.ALL],["MARK",Jl.levels.MARK],["TRACE",Jl.levels.TRACE],["DEBUG",Jl.levels.DEBUG],["INFO",Jl.levels.INFO],["WARN",Jl.levels.WARN],["ERROR",Jl.levels.ERROR],["FATAL",Jl.levels.FATAL],["OFF",Jl.levels.OFF],["all",Jl.levels.ALL],["mark",Jl.levels.MARK],["trace",Jl.levels.TRACE],["debug",Jl.levels.DEBUG],["info",Jl.levels.INFO],["warn",Jl.levels.WARN],["error",Jl.levels.ERROR],["fatal",Jl.levels.FATAL],["off",Jl.levels.OFF]]);var Vl=w&&w.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var u=Object.getOwnPropertyDescriptor(t,n);u&&!("get"in u?!t.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,u)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),Wl=w&&w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),zl=w&&w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&Vl(t,e,n);return Wl(t,e),t};Object.defineProperty(lu,"__esModule",{value:!0}),lu.evaluateLogLevel=lu.HvigorLogger=void 0;const Kl=zl($l),ql=zl(C.default),Yl=Hl;class Xl{constructor(e){Kl.configure((0,Yl.getConfiguration)()),this._logger=Kl.getLogger(e),this._logger.level=(0,Yl.getLevel)()}static getLogger(e){return new Xl(e)}log(e,...t){this._logger.log(e,...t)}debug(e,...t){this._logger.debug(e,...t)}info(e,...t){this._logger.info(e,...t)}warn(e,...t){void 0!==e&&""!==e&&this._logger.warn(e,...t)}error(e,...t){this._logger.error(e,...t)}_printTaskExecuteInfo(e,t){this.info(`Finished :${e}... after ${t}`)}_printFailedTaskInfo(e){this.error(`Failed :${e}... `)}_printDisabledTaskInfo(e){this.info(`Disabled :${e}... `)}_printUpToDateTaskInfo(e){this.info(`UP-TO-DATE :${e}...  `)}errorMessageExit(e,...t){throw new Error(ql.format(e,...t))}errorExit(e,t,...n){t&&this._logger.error(t,n),this._logger.error(e.stack)}setLevel(e,t){(0,Yl.setCategoriesLevel)(e,t),Kl.shutdown(),Kl.configure((0,Yl.getConfiguration)())}getLevel(){return this._logger.level}configure(e){const t=(0,Yl.getConfiguration)(),n={appenders:{...t.appenders,...e.appenders},categories:{...t.categories,...e.categories}};(0,Yl.setConfiguration)(n),Kl.shutdown(),Kl.configure(n)}}lu.HvigorLogger=Xl,lu.evaluateLogLevel=function(e,t){e.setLevel(t)};var Zl={};!function(e){var t=w&&w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.hashFile=e.hash=e.createHash=void 0;const n=t(S.default),r=t(D.default);e.createHash=(e="MD5")=>n.default.createHash(e);e.hash=(t,n)=>(0,e.createHash)(n).update(t).digest("hex");e.hashFile=(t,n)=>{if(r.default.existsSync(t))return(0,e.hash)(r.default.readFileSync(t,"utf-8"),n)}}(Zl);var Ql=w&&w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.getHvigorProjectHome=Ne.executeCommand=Ne.hasNpmPackInPaths=void 0;const ef=m.default,tf=Ql(au),nf=lu,rf=Ql(p.default),uf=Ql(h.default),of=O,sf=Zl,cf=nf.HvigorLogger.getLogger("hvigor");Ne.hasNpmPackInPaths=function(e,t){try{return require.resolve(e,{paths:[...t]}),!0}catch(e){return!1}},Ne.executeCommand=function(e,t,n,r){if(0!==(0,ef.spawnSync)(e,t,n).status){cf.error(`${e} execute failed.`);try{tf.default.removeSync(r)}catch(e){cf.error(`Deleting the directory ${r} failed. Please try delete and execute again`)}process.exit(-1)}},Ne.getHvigorProjectHome=function(e){const t=function(e){let t=`${of.HVIGOR_ENGINE_PACKAGE_NAME}@${e.hvigorVersion}`;const n=e.dependencies;if(n){Object.getOwnPropertyNames(n).sort().forEach((e=>{t+=`,${e}@${n[e]}`}))}return(0,sf.hash)(t)}(e);return rf.default.resolve(uf.default.homedir(),".hvigor","project_caches",t)};var af=w&&w.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var u=Object.getOwnPropertyDescriptor(t,n);u&&!("get"in u?!t.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,u)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),lf=w&&w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ff=w&&w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&af(t,e,n);return lf(t,e),t};Object.defineProperty(W,"__esModule",{value:!0});var df=W.initProjectWorkSpace=void 0;const Df=ff(D.default),pf=ff(p.default),hf=O,mf=T,yf=R,Ef=z,Cf=Ne;let Ff,gf,Af;function vf(e,t,n){return void 0!==n.dependencies&&(0,mf.offlinePluginConversion)(hf.HVIGOR_PROJECT_ROOT_DIR,t.dependencies[e])===n.dependencies[e]}function Sf(){const e=pf.resolve(hf.HVIGOR_PROJECT_WRAPPER_HOME,hf.DEFAULT_HVIGOR_CONFIG_JSON_FILE_NAME);return Df.existsSync(e)||(0,yf.logErrorAndExit)(`Error: Hvigor config file ${e} does not exist.`),(0,Ef.parseJsonFile)(e)}function wf(){const e=pf.resolve(Af,hf.WORK_SPACE,hf.DEFAULT_PACKAGE_JSON);return Df.existsSync(e)?(0,Ef.parseJsonFile)(e):{dependencies:{}}}function bf(){const e=pf.join(Af,hf.WORK_SPACE);if((0,yf.logInfoPrintConsole)("Hvigor cleaning..."),!Df.existsSync(e))return;const t=Df.readdirSync(e);if(!t||0===t.length)return;const n=pf.resolve(Af,"node_modules","@ohos","hvigor","bin","hvigor.js");Df.existsSync(n)&&(0,mf.executeCommand)(process.argv[0],[n,"--stop-daemon"],{});try{t.forEach((t=>{Df.rmSync(pf.resolve(e,t),{recursive:!0})}))}catch(t){(0,yf.logErrorAndExit)(`The hvigor build tool cannot be installed. Please manually clear the workspace directory and synchronize the project again.\n\n      Workspace Path: ${e}.`)}}df=W.initProjectWorkSpace=function(){if(Ff=Sf(),Af=(0,Cf.getHvigorProjectHome)(Ff),gf=wf(),!(Ff=Sf(),gf=wf(),(0,mf.hasNpmPackInPaths)(hf.HVIGOR_ENGINE_PACKAGE_NAME,[pf.join(Af,hf.WORK_SPACE)])&&(0,mf.offlinePluginConversion)(hf.HVIGOR_PROJECT_ROOT_DIR,Ff.hvigorVersion)===gf.dependencies[hf.HVIGOR_ENGINE_PACKAGE_NAME]&&function(){function e(e){const t=null==e?void 0:e.dependencies;return void 0===t?0:Object.getOwnPropertyNames(t).length}const t=e(Ff),n=e(gf);if(t+1!==n)return!1;for(const e in null==Ff?void 0:Ff.dependencies)if(!(0,mf.hasNpmPackInPaths)(e,[pf.join(Af,hf.WORK_SPACE)])||!vf(e,Ff,gf))return!1;return!0}())){bf();try{!function(){(0,yf.logInfoPrintConsole)("Hvigor installing...");const e={dependencies:{}};e.dependencies[hf.HVIGOR_ENGINE_PACKAGE_NAME]=(0,mf.offlinePluginConversion)(hf.HVIGOR_PROJECT_ROOT_DIR,Ff.hvigorVersion);const t=pf.join(Af,hf.WORK_SPACE);try{Df.mkdirSync(t,{recursive:!0});const n=pf.resolve(t,hf.DEFAULT_PACKAGE_JSON);Df.writeFileSync(n,JSON.stringify(e))}catch(e){(0,yf.logErrorAndExit)(e)}(function(){const e=["config","set","store-dir",hf.HVIGOR_PNPM_STORE_PATH],t={cwd:pf.join(Af,hf.WORK_SPACE),stdio:["inherit","inherit","inherit"]};(0,mf.executeCommand)(hf.HVIGOR_WRAPPER_PNPM_SCRIPT_PATH,e,t)})(),function(){const e=["install"],t={cwd:pf.join(Af,hf.WORK_SPACE),stdio:["inherit","inherit","inherit"]};(0,mf.executeCommand)(hf.HVIGOR_WRAPPER_PNPM_SCRIPT_PATH,e,t)}(),(0,yf.logInfoPrintConsole)("Hvigor install success.")}()}catch(e){bf()}}return Af};var Of={},Bf=w&&w.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var u=Object.getOwnPropertyDescriptor(t,n);u&&!("get"in u?!t.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,u)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),_f=w&&w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),kf=w&&w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&Bf(t,e,n);return _f(t,e),t};Object.defineProperty(Of,"__esModule",{value:!0});var xf=Of.executeBuild=void 0;const Pf=kf(D.default),Nf=kf(p.default),If=R;xf=Of.executeBuild=function(e){const t=Nf.resolve(e,"node_modules","@ohos","hvigor","bin","hvigor.js");try{const e=Pf.realpathSync(t);require(e)}catch(n){(0,If.logErrorAndExit)(`Error: ENOENT: no such file ${t},delete ${e} and retry.`)}},function(){b.checkNpmConifg(),b.environmentHandler(),b.isPnpmInstalled()||b.executeInstallPnpm();const e=df();xf(p.default.join(e,O.WORK_SPACE))}();